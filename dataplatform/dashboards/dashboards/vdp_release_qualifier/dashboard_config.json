{
  "dashboard": {
    "name": "VDP Release Qualifier"
  },
  "datasets": {
    "population_stats": "queries/population_stats.sql",
    "rollout_stats": "queries/rollout_stats.sql",
    "lookup_population_types": "queries/lookups/population_types.sql",
    "lookup_product_name": "queries/lookups/product_name.sql",
    "lookup_market": "queries/lookups/market.sql",
    "lookup_org_id": "queries/lookups/org_id.sql",
    "lookup_mmyef": "queries/lookups/mmyef.sql",
    "lookup_build": "queries/lookups/build.sql",
    "lookup_cable_name": "queries/lookups/cable_name.sql",
    "lookup_product_program_id": "queries/lookups/product_program_id.sql",
    "lookup_rollout_stage_id": "queries/lookups/rollout_stage_id.sql"
  },
  "global_filters": [
    {
      "name": "date_range",
      "type": "date_range",
      "title": "Date Range",
      "width": 1,
      "default": {
        "min": "-60d",
        "max": "today"
      }
    },
    {
      "name": "population_type",
      "type": "select",
      "title": "Population",
      "width": 1,
      "default": "product_name",
      "lookup_dataset": "lookup_population_types"
    },
    {
      "name": "market",
      "type": "multi_select",
      "title": "Market",
      "width": 1,
      "default": "NA",
      "lookup_dataset": "lookup_market"
    },
    {
      "name": "org_id",
      "type": "multi_select",
      "title": "Organization ID",
      "width": 1,
      "default": "null",
      "lookup_dataset": "lookup_org_id"
    },
    {
      "name": "product_name",
      "type": "multi_select",
      "title": "Product Name",
      "width": 1,
      "default": "VG54-NA",
      "lookup_dataset": "lookup_product_name"
    },
    {
      "name": "make",
      "type": "multi_select",
      "title": "Make",
      "width": 1,
      "default": "null",
      "lookup_dataset": "lookup_mmyef",
      "lookup_field": "make"
    },
    {
      "name": "model",
      "type": "multi_select",
      "title": "Model",
      "width": 1,
      "default": "null",
      "lookup_dataset": "lookup_mmyef",
      "lookup_field": "model"
    },
    {
      "name": "year",
      "type": "multi_select",
      "title": "Year",
      "width": 1,
      "default": "null",
      "lookup_dataset": "lookup_mmyef",
      "lookup_field": "year"
    },
    {
      "name": "engine_model",
      "type": "multi_select",
      "title": "Engine Model",
      "width": 1,
      "default": "null",
      "lookup_dataset": "lookup_mmyef",
      "lookup_field": "engine_model"
    },
    {
      "name": "engine_type",
      "type": "multi_select",
      "title": "Engine Type",
      "width": 1,
      "default": "null",
      "lookup_dataset": "lookup_mmyef",
      "lookup_field": "engine_type"
    },
    {
      "name": "fuel_type",
      "type": "multi_select",
      "title": "Fuel Type",
      "width": 1,
      "default": "null",
      "lookup_dataset": "lookup_mmyef",
      "lookup_field": "fuel_type"
    },
    {
      "name": "cable_name",
      "type": "multi_select",
      "title": "Cable Name",
      "width": 1,
      "default": "null",
      "lookup_dataset": "lookup_cable_name"
    },
    {
      "name": "build",
      "type": "multi_select",
      "title": "Build",
      "width": 1,
      "default": "null",
      "lookup_dataset": "lookup_build"
    },
    {
      "name": "product_program_id",
      "type": "multi_select",
      "title": "Product Program ID",
      "width": 1,
      "default": "null",
      "lookup_dataset": "lookup_product_program_id"
    },
    {
      "name": "rollout_stage_id",
      "type": "multi_select",
      "title": "Rollout Stage ID",
      "width": 1,
      "default": "null",
      "lookup_dataset": "lookup_rollout_stage_id"
    }
  ],
  "parameters": {
    "metric_name": {
      "type": "string",
      "default": "coverage_engine_seconds"
    },
    "x_min": {
      "type": "string",
      "default": "null"
    },
    "x_max": {
      "type": "string",
      "default": "null"
    },
    "graph_type": {
      "type": "string",
      "default": "null"
    }
  },
  "tabs": [
    {
      "name": "Overview",
      "widgets": [
        {
          "type": "text",
          "content": "## \ud83d\udea6 VDP Release Qualifier\n\n**This dashboard is currently in GA.**  <br>If you suspect any issues with the data, please cross-reference with the legacy Databricks dashboard.\n\n### \ud83d\udcca Dashboards\n\n- \ud83c\uddfa\ud83c\uddf8 [VDP Release Qualifier \u2013 US](https://samsara-dev-us-west-2.cloud.databricks.com/dashboardsv3)\n- \ud83c\uddea\ud83c\uddfa [VDP Release Qualifier \u2013 EU](https://samsara-dev-eu-west-1.cloud.databricks.com/dashboardsv3)\n\n### \ud83e\udde0 Additional Context\n\n- \ud83d\udcc4 [VDP DataWeb Runbook](https://samsaradev.atlassian.net/wiki/spaces/RD/pages/3184886167/VDP+DataWeb+Runbook)\n- \ud83d\udcda [Pipeline & Tables Runbooks](https://samsaradev.atlassian.net/wiki/spaces/RD/folder/3352625401)\n- \ud83d\udd27 [How to Re-materialize an Asset](https://samsaradev.atlassian.net/wiki/spaces/RD/pages/3522527351)",
          "width": 4,
          "height": 7
        },
        {
          "type": "text",
          "content": "### \ud83d\udd0d Dashboard Filters Overview\n\nThe dashboard includes a flexible set of filters to help you analyze data across different **device populations** and **installation targets**.\n\n> **Note:** Only the **grouping type** selected above will determine which dimension filters appear below.\n\nUse these filters to **narrow down results**, focus on specific populations, and analyze trends or performance across various configurations.",
          "width": 2,
          "height": 7
        },
        {
          "type": "text",
          "content": "# \ud83d\udee0\ufe0f Known Issues\n\n1. **Device Count Discrepancies**\n   Device counts may appear slightly higher than in the original Databricks dashboard due to filtering differences.\n\n2. **Missing Historical Data**\n   Data prior to November 21, 2024 is currently missing and must be backfilled in Dagster.\n\n3. **Filtered Data Post-January 13, 2024**\n   Data after January 13, 2024 excludes devices that traveled less than 1 km.",
          "width": 6,
          "height": 7
        }
      ]
    },
    {
      "name": "Rollout Status",
      "widgets": [
        {
          "type": "text",
          "content": "## Device Rollout Status\n\nThis section shows the number of devices on different firmware builds in this region. This data might be useful for identifying if the introduction of a new firmware build caused regressions in our code.",
          "width": 6,
          "height": 2
        },
        {
          "dataset": "rollout_stats",
          "parameters": {
            "product_name": "VG54-NA"
          },
          "type": "area",
          "title": "VG54-NA",
          "width": 6,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["count"],
            "color_by": "key",
            "stacked": true
          }
        },
        {
          "dataset": "rollout_stats",
          "parameters": {
            "product_name": "VG55-NA"
          },
          "type": "area",
          "title": "VG55-NA",
          "width": 6,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["count"],
            "color_by": "key",
            "stacked": true
          }
        },
        {
          "dataset": "rollout_stats",
          "parameters": {
            "product_name": "VG34"
          },
          "type": "area",
          "title": "VG34",
          "width": 6,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["count"],
            "color_by": "key",
            "stacked": true
          }
        },
        {
          "dataset": "rollout_stats",
          "parameters": {
            "product_name": "VG54-EU"
          },
          "type": "area",
          "title": "VG54-EU",
          "width": 6,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["count"],
            "color_by": "key",
            "stacked": true
          }
        },
        {
          "dataset": "rollout_stats",
          "parameters": {
            "product_name": "VG34-EU"
          },
          "type": "area",
          "title": "VG34-EU",
          "width": 6,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["count"],
            "color_by": "key",
            "stacked": true
          }
        }
      ]
    },
    {
      "name": "P0 Diagnostics",
      "widgets": [
        {
          "type": "text",
          "content": "## \ud83d\ude91 P0 Diagnostics Overview\n\nThis section tracks **critical diagnostics (P0)** that directly impact **data quality**, **customer experience**, or indicate **firmware/system-level issues**. These metrics are prioritized based on severity and visibility, as outlined in the [P0 Diagnostics Prioritization Doc](https://docs.google.com/document/d/1uAkhyguLHKH-K6te6OAnf_cowvFA9yv2Vq9NHJNm1vU).\n\nThese diagnostics should be **monitored daily**, with changes exceeding **5%** (or outside expected behavior) flagged for immediate investigation.\n\nFor context on priority and selection rationale, refer to the [P0 Diagnostics Prioritization Doc](https://docs.google.com/document/d/1uAkhyguLHKH-K6te6OAnf_cowvFA9yv2Vq9NHJNm1vU).",
          "width": 6,
          "height": 3
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "hub_server_device_heartbeat_build_count"
          },
          "type": "area",
          "title": "Device Counts Per Day",
          "width": 6,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["count"],
            "color_by": "key",
            "stacked": true
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\udcca ObjectStat Reporting Volume\n\n**Summary**\nTotal count of data points reported per `ObjectStat`. These counts reflect how frequently a stat is reported across all devices.\n\n**What to Look For**\n- Monitor the **volume of data points** over time.\n- Counts are **cyclical** \u2013 expect lower volumes on weekends.\n- Any **drop or spike \u2265 5%** (after adjusting for normal cycles) should be investigated.\n- Changes may correlate with **reporting coverage issues** or **configuration errors**.\n\n**Customer Impact**\n- \ud83d\udcc9 **Drop in reporting volume \u2265 5%** \u2192 Indicates missing customer data.\n- \ud83d\udcc8 **Unexpected increase** \u2192 May surface incorrect data (e.g., faulty engine hours causing excessive logs).\n- \u2705 In some cases, increases could indicate **improved stat coverage** for customers.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "fuel_type_count,odometer_count,obd_cable_id_count,engine_state_count,engine_seconds_count,engine_rpm_count,fuel_level_percent_count"
          },
          "type": "area",
          "title": "Volume",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["sum"],
            "color_by": "key",
            "stacked": true
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\udcc8 Percent Coverage\n\n**Summary**\nPercent of devices reporting a specific type of `ObjectStat` on a given day. This reflects how broadly the stat is supported and successfully collected across the active fleet.\n\n**What to Look For**\n- Only devices with **GPS distance traveled** are included in coverage calculations.\n- Coverage should remain **stable throughout the week** (not cyclical like counts).\n- A **change \u2265 5%** in coverage should be investigated.\n\n**Customer Impact**\n- \ud83d\udcc9 **Drop in coverage** \u2192 Potential firmware or data collection issue \u2192 **Customer data loss**.\n- \ud83d\udcc8 **Increase in coverage** \u2192 More data available for customers.\n- Could be due to **new installations** or **expanded stat support** via reverse engineering.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "coverage_fuel_type,coverage_odometer,coverage_obd_cable_id,coverage_engine_state,coverage_engine_seconds,coverage_engine_rpm,coverage_fuel_level_percent"
          },
          "type": "line",
          "title": "Percent Coverage",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["coverage"],
            "y_format": "percent",
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\ude97 Percent Coverage While CAN Connected and Driving\n\n**Summary**\nMeasures the **average device status flags** while a vehicle is driving above **25 mph**, using a **7-day rolling window** per calendar day (e.g., data for Dec 12 includes events from Dec 6\u201312).\nThis metric runs on a **2-day lag** to ensure end-of-trip segments are captured accurately.\n\n**What to Look For**\n- \u2705 Expect **high values (~100%)** for:\n  - CAN connected\n  - ECU reporting speed\n  - Engine On\n  - Voltage present\n- \u274c Expect **low values (~0%)** for:\n  - Engine Off\n  - Idling\n\nDeviations from these expectations may indicate **firmware issues**, **CAN bus problems**, or **connectivity breakdowns**.\n\n**Customer Impact**\n- \u26a0\ufe0f Inconsistent or low CAN signal quality leads to **missing diagnostics and reduced visibility** into vehicle health.\n- This impacts both internal monitoring and **customer-facing reporting** tied to vehicle usage and engine diagnostics.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "on_drive_gps_engine_on_percent,on_drive_gps_engine_off_percent,on_drive_gps_engine_idle_percent,on_drive_gps_can_connected_percent,on_drive_gps_cable_non_zero_voltage_percent,on_drive_has_ecu_speed_percent"
          },
          "type": "line",
          "title": "Percent Coverage while CAN Connected and Driving",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["avg"],
            "y_format": "percent",
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\udd0d Percent Invalid ObjectStats\n\n**Summary**\nPercent of invalid `ObjectStats` reported. A value is considered invalid based on a set of static boundary checks applied to each `ObjectStat`.\n- **DataHub table:** [`product_analytics_staging.fct_telematics_stat_metadata`](https://datahub.internal.samsara.com/dataset/urn:li:dataset:(urn:li:dataPlatform:databricks,product_analytics_staging.fct_telematics_stat_metadata,PROD))\n\n**What to Look For**\n- Monitor the **volume of data points** being reported.\n- Any change in **percent invalid \u2265 5%** should be investigated further.\n\n**Customer Impact**\n- \ud83d\udcc9 **Increased invalid %** \u2192 Lower customer data quality.\n- \ud83d\udcc8 **Decreased invalid %** \u2192 Higher data quality.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "percent_invalid_engine_state,percent_invalid_fuel_level_percent,percent_invalid_odometer,percent_invalid_engine_seconds,percent_invalid_engine_rpm,percent_invalid_fuel_type"
          },
          "type": "line",
          "title": "Percent Invalid",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["avg"],
            "y_format": "percent",
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\udeab Invalid ObjectStat Volume\n\n**Summary**\nTotal count of invalid `ObjectStats` reported. A value is considered invalid based on a set of static boundary checks applied to each `ObjectStat`.\n- **DataHub table:** [`product_analytics_staging.fct_telematics_stat_metadata`](https://datahub.internal.samsara.com/dataset/urn:li:dataset:(urn:li:dataPlatform:databricks,product_analytics_staging.fct_telematics_stat_metadata,PROD))\n\n**What to Look For**\n- Track **absolute volume** of invalid datapoints, not just percentages.\n- Spikes or drops in volume (especially \u2265 5%) may indicate firmware issues, boundary config errors, or wider fleet changes.\n\n**Customer Impact**\n- \ud83d\udcc9 **High invalid volume** \u2192 More bad data reaching systems \u2192 Lower customer data quality.\n- \ud83d\udcc8 **Decrease in invalid volume** \u2192 Better data quality or improved firmware behavior.\n- Volume trends can reveal **silent issues** even if overall percentages look stable.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "anomaly_count_fuel_type,anomaly_count_odometer,anomaly_count_obd_cable_id,anomaly_count_engine_state,anomaly_count_engine_seconds,anomaly_count_engine_rpm,anomaly_count_fuel_level_percent"
          },
          "type": "area",
          "title": "Count Invalid",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["sum"],
            "color_by": "key",
            "stacked": true
          }
        },
        {
          "type": "text",
          "content": "### \ud83c\udfa2 Seatbelt State Changes per KM\n\n**Summary**\nNumber of times the seatbelt state changed per kilometer of driving. This metric reflects how often a vehicle reports seatbelt status toggling relative to distance traveled.\n\n**What to Look For**\n- Values should be **close to zero** for most vehicles.\n- A value near **100 per km** implies the seatbelt is toggling on/off multiple times in a short distance, which is unlikely under normal driving.\n- Investigate outliers or sudden shifts in this rate.\n\n**Customer Impact**\n- \ud83d\udea8 **High seatbelt change rate** \u2192 Indicates possible sensor malfunction or **oscillating signal**.\n- May lead to **false seatbelt alerts** or **incorrect safety data** being shown to customers.\n\n---\n\n**\u2699\ufe0f Implementation Note \u2014 `vg-34` Release Change**\nStarting in the `vg-34` release, there was a change in how seatbelt state is reported:\n\n- Reporting cadence was updated to **every 2 minutes and on state change**.\n- If downstream metrics (like **seatbelt buckles per km**) are still assuming \"on-change-only\" behavior, the addition of time-based updates may **inflate the counts artificially**.\n- This is likely contributing to anomalously high toggle rates.\n\n\ud83d\udcce For more details, refer to [VDP-5241](https://samsaradev.atlassian.net/browse/VDP-5241).",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "ratio_seatbelt_toggles_to_gps_distance",
            "graph_type": "percentile"
          },
          "type": "line",
          "title": "Distribution Seatbelt Toggles / GPS Distance",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["y"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "## \u26fd P0 Product Area \u2013 Fuel\n\n**Overview**\nFuel reporting on firmware is derived from multiple configurable methods, each with its own dependencies and accuracy tradeoffs.\n\n- \ud83d\udcc4 Full details: [Fuel Consumption \u2013 VDP Wiki](https://samsaradev.atlassian.net/wiki/spaces/RD/pages/550765958/VDP+Fuel+Consumption)",
          "width": 6,
          "height": 3
        },
        {
          "type": "text",
          "content": "### \ud83d\udef0\ufe0f Percent Coverage\n\n**Summary**\nPercent of devices reporting a specific type of `ObjectStat` on a given day.\n\n**What to Look For**\n- Coverage should be **stable across all days**.\n- A **change \u2265 5%** may signal an issue.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "coverage_fuel_level_percent,coverage_fuel_type,coverage_delta_fuel_consumed"
          },
          "type": "line",
          "title": "Percent Coverage",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["coverage"],
            "y_format": "percent",
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\udeab Percent Invalid\n\n**Summary**\nPercent of invalid `ObjectStats` reported, based on static boundary checks.\n\n**What to Look For**\n- A **change \u2265 5%** in invalid rate should be investigated.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "percent_invalid_delta_fuel_consumed"
          },
          "type": "line",
          "title": "Percent Invalid",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["avg"],
            "y_format": "percent",
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \u26fd Fuel Economy Distribution (Fuel Consumed / GPS Distance)\n\n**Summary**\nEstimates fuel economy by analyzing the distribution of **fuel consumed per GPS distance traveled** (L/100km). This provides insight into fuel usage across the fleet.\n\n**What to Look For**\n- \ud83d\udcca Heavy-duty vehicles: typically **40\u201360 L/100km**\n- \ud83d\ude97 Light-duty vehicles: typically **< 20 L/100km**\n- **Upper percentiles (p95+) exceeding 100 L/100km** are abnormally high and should be investigated.\n- Historical distributions have shown **excessive fuel consumption**, suggesting data or calculation issues.\n\n**Customer Impact**\n- \u26a0\ufe0f **High values in upper percentiles** \u2192 May cause **inaccurate fuel usage reporting** for customers.\n- Impacts trust in dashboards, especially for **fleet fuel efficiency and cost tracking** tools.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "ratio_fuel_consumed_to_gps_distance",
            "graph_type": "percentile"
          },
          "type": "line",
          "title": "Fuel Consumed / GPS Distance",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["y"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "## \ud83d\udccb P0 Product Area \u2013 ELD\n\n**Overview**\nElectronic Logging Device (ELD) functionality depends on accurate reporting of engine state, odometer, engine hours, and driver interactions.\n\n- \ud83d\udcc4 General firmware info: [ELD \u2013 VDP Wiki](https://samsaradev.atlassian.net/wiki/spaces/RD/folder/3350790988)",
          "width": 6,
          "height": 3
        },
        {
          "type": "text",
          "content": "### \ud83d\udccf Odometer Over Trip Distance (Percentiles)\n\n**Summary**\nPercentiles of the ratio between vehicle **odometer** and **GPS distance traveled**.\n\n**What to Look For**\n- Typical range is between **0.5 and 1.6**.\n- Significant deviation from **1.0** may require investigation.",
          "width": 2,
          "height": 8
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "ratio_odometer_to_gps_distance",
            "graph_type": "percentile"
          },
          "type": "line",
          "title": "Distribution Odometer Over Trip Distance",
          "width": 4,
          "height": 8,
          "config": {
            "x_axis": "date",
            "y_fields": ["y"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\ude97 Daily Odometer Over Engine Time\n\n**Summary**\nPercentiles of the ratio between **vehicle odometer** and **engine time** (lifetime average speed).\n\n**What to Look For**\n- Typical values range from **1 to 130 km/h**.\n- Values **exceeding 200 km/h** should be flagged.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "ratio_odometer_to_engine_seconds",
            "graph_type": "percentile"
          },
          "type": "line",
          "title": "Odometer Over Engine Time",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["y"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "## \ud83c\udf3f P0 Product Area \u2013 EcoDriving\n\n**Overview**\nEcoDriving metrics measure driving efficiency and behavior using stats like idling, coasting, and harsh braking. These are derived from GPS and powertrain signals and can vary by vehicle type. They're used to surface actionable insights in driver scorecards and fleet performance tools.\n\n- \ud83d\udcc4 Full details: [EcoDriving \u2013 VDP Wiki](https://samsaradev.atlassian.net/wiki/spaces/RD/pages/2079622342/VDP+EcoDriving)",
          "width": 6,
          "height": 3
        },
        {
          "type": "text",
          "content": "### \ud83d\udeab Percent Invalid\n\n**Summary**\nPercent of invalid `ObjectStats` reported, based on static boundary checks applied to each stat. This helps assess the reliability of data reported from vehicles.\n- **DataHub table:** [`product_analytics_staging.fct_telematics_stat_metadata`](https://datahub.internal.samsara.com/dataset/urn:li:dataset:(urn:li:dataPlatform:databricks,product_analytics_staging.fct_telematics_stat_metadata,PROD))\n\n**What to Look For**\n- Check both **percent invalid** and the **total volume** of data points.\n- Investigate any **change \u2265 5%** in the invalid rate.\n- Consider whether shifts are due to **firmware behavior**, **stat definition updates**, or **coverage changes**.\n\n**Customer Impact**\n- \ud83d\udcc9 **Increase in percent invalid** \u2192 Lower customer data quality; may surface **erroneous or misleading data**.\n- \ud83d\udcc8 **Decrease in percent invalid** \u2192 Indicates **improvement in data accuracy**.\n- Be aware that a drop may also result from **reduced reporting device count**.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "percent_invalid_delta_accel_engine_torque_over_limit,percent_invalid_delta_accel_engine_torque_over_limit_while_not_on_cruise_control,percent_invalid_delta_accelerator_pedal_time_greater_than_95_percent,percent_invalid_delta_anticipation_brake_events,percent_invalid_delta_brake_events,percent_invalid_delta_coasting_time,percent_invalid_delta_coasting_time_torque_based_while_not_on_cruise_control,percent_invalid_delta_coasting_time_while_not_on_cruise_control,percent_invalid_delta_cruise_control"
          },
          "type": "line",
          "title": "Percent Invalid",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["avg"],
            "y_format": "percent",
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\udcc9 Count of Invalid ObjectStats\n\n**Summary**\nTotal count of invalid `ObjectStats` reported, based on static boundary checks applied to each stat. This metric reflects the **absolute volume** of invalid data reported by the fleet.\n- **DataHub table:** [`product_analytics_staging.fct_telematics_stat_metadata`](https://datahub.internal.samsara.com/dataset/urn:li:dataset:(urn:li:dataPlatform:databricks,product_analytics_staging.fct_telematics_stat_metadata,PROD))\n\n**What to Look For**\n- Monitor the **raw number of invalid data points**, especially in conjunction with percent invalid.\n- Investigate any **unexpected spikes or drops**, especially those correlating with firmware rollouts or stat changes.\n- Compare against reporting volume to determine if changes are driven by data issues or coverage shifts.\n\n**Customer Impact**\n- \ud83d\udea8 **High invalid counts** \u2192 Increased volume of bad data shown to customers \u2192 **reduced trust** in platform insights.\n- \ud83d\udcc9 **Drop in invalid counts** \u2192 Likely improvement in stat behavior, firmware, or filtering.\n- Note: A reduction may also result from **fewer devices reporting** the stat.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "anomaly_count_delta_coasting_time,anomaly_count_delta_brake_events"
          },
          "type": "area",
          "title": "Count Invalid",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["sum"],
            "color_by": "key",
            "stacked": true
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\udef0\ufe0f Percent Coverage\n\n**Summary**\nPercent of devices reporting a specific type of `ObjectStat` on a given day. This metric reflects how broadly a stat is supported and successfully collected across the active fleet.\n\n**What to Look For**\n- Includes only devices with **trip distance traveled** on a given day.\n- Coverage should be **relatively consistent day-to-day**, not subject to weekly cycles.\n- Investigate **changes \u2265 5%**, especially if paired with changes in invalid rates or total volume.\n\n**Customer Impact**\n- \ud83d\udcc9 **Drop in percent coverage** \u2192 May signal **firmware or data collection issues**, leading to **missing customer data**.\n- \ud83d\udcc8 **Increase in coverage** \u2192 Can reflect **improved visibility** due to new installations, firmware updates, or reverse-engineered stat support.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "coverage_delta_coasting_time,coverage_delta_brake_events"
          },
          "type": "line",
          "title": "Percent Coverage",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["coverage"],
            "y_format": "percent",
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\udd70\ufe0f Distribution \u2013 Time Coasting Over Trip Distance\n\n**Summary**\nDistribution of the ratio between **coasting time (ms)** and **GPS distance traveled (meters)**. This metric gives insight into how much of a trip is spent coasting across the fleet.\n\n**What to Look For**\n- There is **no strict expected value**, but this helps surface **anomalous coasting behavior**.\n- Example: **8 ms/m** \u2248 **22% of the trip** spent coasting \u2014 considered **sensible** baseline.\n- Use this distribution to investigate **outliers** and flag potential **firmware or signal interpretation issues**.\n\n**Customer Impact**\n- \u26a0\ufe0f If coasting ratios are incorrect, **driver efficiency reports** will show **misleading insights**.\n- Impacts customer perception of **fuel efficiency**, **driving behavior**, and **trip-level reporting accuracy**.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "ratio_coasting_time_to_gps_distance",
            "graph_type": "percentile"
          },
          "type": "line",
          "title": "Time Coasting / Trip Distance",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["y"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\uded1 Distribution \u2013 Brake Events Over Trip Distance\n\n**Summary**\nDistribution of the ratio between **brake events** and **GPS distance traveled (meters)**. This helps assess how frequently vehicles brake relative to distance driven.\n\n**What to Look For**\n- No strict expected ratio, but use distribution shape to flag anomalies.\n- Example: **10 brake events per meter** is likely **erroneous**, while **0.1 brake events per meter** is more **realistic**.\n- Outliers may indicate **signal duplication**, **firmware bugs**, or **misinterpretation of braking signals**.\n\n**Customer Impact**\n- \u26a0\ufe0f Inaccurate brake event ratios lead to **incorrect driver efficiency reporting**.\n- Can distort insights around **safe driving**, **harsh braking**, and **trip-level driver behavior**.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "ratio_brake_events_to_gps_distance",
            "graph_type": "percentile"
          },
          "type": "line",
          "title": "Brake Events / Trip Distance",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["y"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\uded1 Distribution \u2013 Anticipation Brake Events Over Trip Distance\n\n**Summary**\nDistribution of the ratio between **anticipation brake events** and **GPS distance traveled (meters)**. This metric provides visibility into how frequently vehicles perform anticipation braking relative to distance driven.\n\n**What to Look For**\n- No strict \"correct\" ratio, but the distribution helps flag **abnormally high or low braking behavior**.\n- Anticipation braking is generally a sign of **good driving behavior**.\n- Outliers could indicate **firmware issues**, **duplicate events**, or **misclassification of signals**.\n\n**Customer Impact**\n- \u26a0\ufe0f Incorrect brake event ratios lead to **inaccurate driver efficiency reports**.\n- Can distort customer-facing metrics on **safe driving**, **braking habits**, and **vehicle health**.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "ratio_anticipation_brake_events_to_gps_distance",
            "graph_type": "percentile"
          },
          "type": "line",
          "title": "Anticipation Brake Events / Trip Distance",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["y"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "## \u26a1 P0 Product Area \u2013 EV\n\n**Overview**\nElectric vehicle (EV) reporting involves a unique set of ObjectStats and firmware logic to track state of charge, energy consumed, charging behavior, and range estimates. Data can vary significantly by OEM and often requires normalization across EV platforms.\n\n- \ud83d\udcc4 Full details: [EV Reporting \u2013 VDP Wiki](https://samsaradev.atlassian.net/wiki/spaces/RD/pages/2033156175/VDP+Electric+Vehicles)",
          "width": 6,
          "height": 3
        },
        {
          "type": "text",
          "content": "### \ud83d\udcc9 Count of Invalid ObjectStats\n\n**Summary**\nTotal count of invalid `ObjectStats` reported, based on static boundary checks applied to each stat. This metric captures the **absolute volume** of invalid data reported across the fleet.\n- **DataHub table:** [`product_analytics_staging.fct_telematics_stat_metadata`](https://datahub.internal.samsara.com/dataset/urn:li:dataset:(urn:li:dataPlatform:databricks,product_analytics_staging.fct_telematics_stat_metadata,PROD))\n\n**What to Look For**\n- Monitor for **spikes or drops** in invalid count, especially alongside changes in total volume or percent invalid.\n- Investigate **unexpected increases** that could signal issues with **firmware**, **boundary config**, or **device behavior**.\n- A drop in count may indicate **fewer devices reporting** or **data filtering improvements**.\n\n**Customer Impact**\n- \ud83d\udea8 **High invalid count** \u2192 Larger volume of **bad data delivered to customers**, degrading trust in analytics.\n- \u2705 **Reduction in invalid count** \u2192 Potential improvement in **data quality**, but validate against overall coverage.\n- Count trends offer **early signals of silent data issues**, even if percentages remain stable.",
          "width": 2,
          "height": 8
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "anomaly_count_ev_charging_type,anomaly_count_delta_ev_distance_driven_on_electric_power,anomaly_count_delta_ev_energy_consumed,anomaly_count_delta_ev_total_energy_regenerated_while_driving,anomaly_count_ev_average_cell_temperature,anomaly_count_ev_usable_state_of_charge_milli_percent,anomaly_count_ev_last_charge_ac_wall_energy_consumed,anomaly_count_ev_high_capacity_battery_milli_amp,anomaly_count_ev_charging_status,anomaly_count_ev_high_capacity_battery_remaining_energy_wh,anomaly_count_ev_high_capacity_battery_display_state_of_charge_milli_percent,anomaly_count_ev_high_capacity_battery_milli_volt,anomaly_count_ev_high_capacity_battery_real_state_of_charge_milli_percent,anomaly_count_ev_charger_milli_amp,anomaly_count_ev_charger_milli_volt,anomaly_count_ev_high_capacity_battery_state_of_health,anomaly_count_delta_ev_charging_energy"
          },
          "type": "area",
          "title": "Count Invalid",
          "width": 4,
          "height": 8,
          "config": {
            "x_axis": "date",
            "y_fields": ["sum"],
            "color_by": "key",
            "stacked": true
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\udeab Percent Invalid\n\n**Summary**\nPercent of invalid `ObjectStats` reported, determined by applying static boundary checks to each stat. This helps monitor the quality and correctness of the data collected from devices.\n- **DataHub table:** [`product_analytics_staging.fct_telematics_stat_metadata`](https://datahub.internal.samsara.com/dataset/urn:li:dataset:(urn:li:dataPlatform:databricks,product_analytics_staging.fct_telematics_stat_metadata,PROD))\n\n**What to Look For**\n- Always **double-check volume** when percent invalid shifts.\n- A **\u2265 5% change** in the percent invalid metric should trigger investigation.\n- Sudden changes may reflect **firmware issues**, **stat configuration changes**, or **reporting coverage changes**.\n\n**Customer Impact**\n- \ud83d\udcc9 **Increase in percent invalid** \u2192 Signals **decreased data quality**; customers may see incorrect or missing data.\n- \ud83d\udcc8 **Decrease in percent invalid** \u2192 Suggests **improved data integrity**, but may also result from **fewer devices reporting**.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "percent_invalid_delta_ev_distance_driven_on_electric_power,percent_invalid_ev_last_charge_ac_wall_energy_consumed,percent_invalid_delta_ev_charging_energy,percent_invalid_ev_high_capacity_battery_real_state_of_charge_milli_percent,percent_invalid_ev_high_capacity_battery_remaining_energy_wh,percent_invalid_delta_ev_total_energy_regenerated_while_driving,percent_invalid_ev_charging_type,percent_invalid_ev_high_capacity_battery_display_state_of_charge_milli_percent,percent_invalid_ev_usable_state_of_charge_milli_percent,percent_invalid_ev_average_cell_temperature,percent_invalid_ev_charging_status,percent_invalid_ev_charger_milli_volt,percent_invalid_ev_high_capacity_battery_milli_amp,percent_invalid_ev_charger_milli_amp,percent_invalid_delta_ev_energy_consumed,percent_invalid_ev_high_capacity_battery_milli_volt,percent_invalid_ev_high_capacity_battery_state_of_health"
          },
          "type": "line",
          "title": "Percent Invalid",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["avg"],
            "y_format": "percent",
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\udef0\ufe0f Percent Coverage\n\n**Summary**\nPercent of devices reporting a specific type of `ObjectStat` on a given day. This helps measure the **breadth of data availability** across the active fleet.\n\n**What to Look For**\n- Calculated using devices with **GPS distance traveled**\n- Coverage should be **stable day-to-day**, unlike cyclical patterns seen in volume metrics.\n- Investigate **changes \u2265 5%**, especially if paired with shifts in invalid rates or volume.\n\n**Customer Impact**\n- \ud83d\udcc9 **Drop in percent coverage** \u2192 Potential firmware or reporting issue \u2192 **missing data for customers**.\n- \ud83d\udcc8 **Increase in coverage** \u2192 More data available due to **wider stat support**, **reverse engineering**, or **increased installations**.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "coverage_ev_high_capacity_battery_milli_amp,coverage_ev_charger_milli_volt,coverage_ev_high_capacity_battery_milli_volt,coverage_ev_high_capacity_battery_real_state_of_charge_milli_percent,coverage_ev_high_capacity_battery_remaining_energy_wh,coverage_ev_high_capacity_battery_display_state_of_charge_milli_percent,coverage_delta_ev_distance_driven_on_electric_power,coverage_delta_ev_total_energy_regenerated_while_driving,coverage_ev_average_cell_temperature,coverage_ev_high_capacity_battery_state_of_health,coverage_delta_ev_energy_consumed,coverage_ev_charging_status,coverage_ev_usable_state_of_charge_milli_percent,coverage_ev_last_charge_ac_wall_energy_consumed,coverage_ev_charging_type,coverage_ev_charger_milli_amp,coverage_delta_ev_charging_energy"
          },
          "type": "line",
          "title": "Percent Coverage",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["coverage"],
            "y_format": "percent",
            "color_by": "key"
          }
        }
      ]
    },
    {
      "name": "Internal",
      "widgets": [
        {
          "type": "text",
          "content": "## ðŸ“Š Rate Metrics\n\n**Overview**\nThe **Rate** section captures how frequently key diagnostic events occur or how reliably communication flows between the firmware and vehicle systems. These metrics focus on **volume, responsiveness, and fault frequency**â€”surfacing potential issues in how often or how well we're interacting with the vehicle's networks.",
          "width": 3,
          "height": 3
        },
        {
          "type": "text",
          "content": "### \ud83e\udded Why This Matters\nRate-related metrics are crucial for detecting:\n- \u26a0\ufe0f **Abnormal communication patterns** (e.g., missing responses, high fault spikes)\n- \u26a0\ufe0f **Protocol-level compatibility issues**\n- \u26a0\ufe0f **Subtle degradations** in data fidelity over time",
          "width": 3,
          "height": 3
        },
        {
          "type": "text",
          "content": "### \ud83d\udea8 J1939 Engine Fault: P95 Rate\n\n**Summary**\nTracks the **95th percentile (P95) of J1939 fault rate** per device, measured daily. This reflects how many engine faults are being logged across the fleet, with emphasis on the higher end of the distribution (e.g., devices logging 1+ faults/day).\n\n**What to Look For**\n- \ud83d\udcc9 The **exact value isn't critical**\u2014unless it spikes unusually high.\n- \ud83d\udcc8 Focus on the **day-over-day trend**: a flat, stable line is ideal.\n- Sudden increases may indicate a **fleet-wide compatibility or data ingestion issue**.\n\n**Customer Impact**\n- \u26a0\ufe0f A **jumpy or elevated fault rate** could signal compatibility issues with our device on the J1939 network.\n- May result in **excessive fault alerts** or **false positives** in customer-facing diagnostics, eroding trust in the data.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "j1939_fault_count"
          },
          "type": "line",
          "title": "J1939 Engine Fault: P95 Rate",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["avg"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\ude97 Passenger Engine Fault: P95 Rate\n\n**Summary**\nTracks the **95th percentile (P95) of OBDII fault rate** per device, measured daily. This shows how frequently faults are being logged for the upper end of passenger vehicle devices (e.g., 1+ faults/day).\n\n**What to Look For**\n- \ud83d\udcc9 The **absolute value** isn't as important unless it's unusually high.\n- \ud83d\udcc8 Focus on maintaining a **stable trend line** day-over-day.\n- Spikes or increased volatility may indicate **protocol compatibility issues** or changes in fault detection behavior.\n\n**Customer Impact**\n- \u26a0\ufe0f A **jumpy or elevated fault rate** could point to **firmware or hardware-level incompatibilities** with OBDII networks.\n- May lead to **incorrect or excessive fault alerts**, resulting in **reduced customer trust** and potential support escalations.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "passenger_fault_count"
          },
          "type": "line",
          "title": "Passenger Engine Fault: P95 Rate",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["avg"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\udd04 Command Scheduler: Average RX / TX Rate\n\n**Summary**\nMeasures the **average request-to-response (RX/TX) rate** for devices. For example, a value of `0.9` means that for every 10 diagnostic requests sent, 9 responses were received.\n\n**What to Look For**\n- \u2705 Expect this value to be **close to 1.0** for healthy communication.\n- \u274c Lower values suggest that **responses to requests are being missed**.\n\n**Customer Impact**\n- \u26a0\ufe0f A low RX/TX rate may result in **delayed or incomplete diagnostic data**.\n- This can **subtly degrade the accuracy** and **fidelity** of logged stats, potentially impacting customer-facing diagnostics and analytics over time.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "ratio_command_scheduler_rx_tx_rate"
          },
          "type": "line",
          "title": "Command Scheduler: Average RX / TX Rate",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["avg"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "## \ud83d\udd22 Count Metrics\n\n**Overview**\nThe **Count** section surfaces metrics that track the **frequency of specific diagnostic events or behaviors** on a daily basis. These metrics focus on how often something is happening\u2014such as address claim failures, value locks, or faults\u2014giving visibility into **unexpected behaviors, regressions, or emerging issues** across the fleet.",
          "width": 3,
          "height": 3
        },
        {
          "type": "text",
          "content": "### \ud83e\udded Why This Matters\nTracking high-percentile event counts helps identify:\n- \u26a0\ufe0f **Edge-case behaviors** that affect a subset of devices\n- \ud83d\udcc8 **Silent degradations** that may not immediately impact all customers\n- \ud83d\udd0d Firmware or diagnostic **instability patterns** needing investigation",
          "width": 3,
          "height": 3
        },
        {
          "type": "text",
          "content": "### \ud83d\udeab J1939 Address Claim: P95 Failure Count\n\n**Summary**\nTracks the **95th percentile (P95) of daily J1939 address claim failures** per device. A failure here means the device was unable to successfully claim a valid J1939 address.\n\n**What to Look For**\n- \u2705 This value should be **0 or very close to 0**.\n- \u274c Any sustained increase or spikes in this metric are cause for investigation.\n\n**Customer Impact**\n- \u26a0\ufe0f A failed address claim means the device is communicating from the **NULL address**, which is **not CARB compliant**.\n- This compromises our ability to **reliably transmit diagnostics** and may impact **regulatory compliance**.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "j1939_no_open_address_found"
          },
          "type": "line",
          "title": "J1939 Address Claim: P95 Failure Count",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["avg"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\udd12 Obd Value Lock: P95 Added Count\n\n**Summary**\nTracks the **95th percentile (P95) of daily OBD value lock additions** per device (e.g., odometer or engine hours being re-locked). This metric shows how often new diagnostic locks are added on a given day.\n\n**What to Look For**\n- \u2705 Expect a **consistent trend line** with a value typically **below 3**.\n- \u2139\ufe0f Currently, this feature is **log-only and not enabled by default**.\n- A **subset of frequently locking devices** may skew this metric upward.\n\n**Customer Impact**\n- \u26a0\ufe0f Frequent lock additions indicate we're **re-evaluating or changing the diagnostic source**, which may lead to:\n  - **Gaps or jumps** in reported data\n  - **Inconsistencies in long-term metrics** like odometer or engine hours\n  - **Customer confusion** due to fluctuating diagnostic values",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "obd_value_lock_added_count"
          },
          "type": "line",
          "title": "Obd Value Lock: P95 Added Count",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["avg"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "## \ud83d\udcc9 Percent Metrics\n\n**Overview**\nThe **Percent** section tracks metrics that measure the **proportion of expected behaviors or detections occurring** across the fleet. These values are typically represented as decimals between 0 and 1, offering a normalized view of how consistently specific conditions are met.",
          "width": 3,
          "height": 3
        },
        {
          "type": "text",
          "content": "### \ud83e\udded Why This Matters\nPercent-based metrics provide an easy way to:\n- \ud83d\udcca **Quantify consistency** across a large fleet\n- \u26a0\ufe0f Detect **silent regressions** in protocol detection, firmware behavior, or diagnostic logic\n- \ud83d\udcc8 Monitor **adoption or reach** of newly rolled out features or detections",
          "width": 3,
          "height": 3
        },
        {
          "type": "text",
          "content": "### \ud83d\ude8d J1939 Protocol Detected on Passenger-Type Vehicles\n\n**Summary**\nMeasures the **percent (out of 1)** of instances where the **J1939 protocol is detected** on the **passenger primary bus**. This helps monitor unexpected protocol detection on passenger-type vehicles.\n\n**What to Look For**\n- \ud83d\udcc8 Expect a **consistent trend line** day-over-day.\n- \ud83d\udd0d Sudden spikes or drops may indicate detection logic changes or unexpected firmware behavior.\n\n**Customer Impact**\n- \u2139\ufe0f This detection is currently **log-only** and does **not impact customer data or diagnostics**.\n- Used for internal validation and monitoring as we refine protocol detection across platforms.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "can_protocol_detected_protocol"
          },
          "type": "line",
          "title": "J1939 Protocol Detected on Passenger-Type Vehicles",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["avg"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "## \ud83d\udd01 Consistency Metrics\n\n**Overview**\nThe **Consistency** section monitors whether key systems and diagnostic behaviors are functioning **predictably and reliably across sessions and days**. These metrics focus on stability in firmware decision-making, protocol selection, and communication patterns\u2014ensuring the vehicle's diagnostic loop behaves as expected over time.",
          "width": 3,
          "height": 3
        },
        {
          "type": "text",
          "content": "### \ud83e\udded Why This Matters\nInconsistencies in protocol, bus detection, or command behavior can lead to:\n- \u274c **Data gaps or volatility** in reported diagnostics\n- \u274c **Misalignment** between sessions (e.g., varying signal sources or missing values)\n- \u274c **Unnecessary load** on vehicle networks or firmware loops\n- \u274c **Customer-facing confusion** and potential compliance risks",
          "width": 3,
          "height": 3
        },
        {
          "type": "text",
          "content": "### \ud83e\udde9 Consistency: CAN Bitrate V2\n\n**Summary**\nTracks the **average percent of devices** per day that report a **consistent baud rate detection** (e.g., always detecting 500k when baud detection is run). This metric helps ensure stability in CAN communication.\n\n**What to Look For**\n- \u2705 This metric should be **close to 1.0** (or 100%).\n- \u274c Lower values suggest inconsistent baud rate detections, which may indicate a misconfigured or unstable CAN network.\n\n**Customer Impact**\n- \u26a0\ufe0f Inconsistent baud rate detection can mean we're connecting to the **CAN bus at the wrong bitrate**.\n- This can cause **network-wide traffic failures** and **error frames**, leading to degraded data capture and performance until the device self-corrects by disconnecting from the bus.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "consistency_can_bitrate_detection_v2"
          },
          "type": "line",
          "title": "Consistency: CAN Bitrate V2",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["avg"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\uded1 Consistency: Command Scheduler Stopped Commands\n\n**Summary**\nMeasures the **average percent of devices** with **consistent command stop behavior** on trips longer than 1 hour.\nFor example, if 4 commands are stopped in one session and the same 4 are stopped in the next, the device is considered consistent.\n\n**What to Look For**\n- \u2705 Expect this metric to be **close to 1.0** (or 100%).\n- \u274c Lower values indicate **inconsistent command scheduling behavior** across sessions.\n\n**Customer Impact**\n- \u26a0\ufe0f Inconsistencies in command stopping can result in:\n  - **Unexpected diagnostics loss**\n  - **Increased network traffic** from unnecessary re-activation\n  - Potential strain on **CAN or OBD networks**, impacting overall data quality",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "consistency_command_scheduler_stopped"
          },
          "type": "line",
          "title": "Consistency: Command Scheduler Stopped Commands",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["avg"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \ud83e\uddfe Consistency: J1939 Address Claim\n\n**Summary**\nMeasures the **average percent of devices** with **consistent J1939 claimed addresses** day-over-day. This reflects stability in how devices identify themselves on the J1939 CAN network.\n\n**What to Look For**\n- \ud83d\udcc8 Since J1939 address claiming is new in **VG28**, we don't yet have a defined threshold for pass/fail.\n- For now, we expect to see a **stable, flat trend line** over time.\n- Investigate spikes, dips, or erratic patterns that suggest variability in address claims.\n\n**Customer Impact**\n- \u2753 **Impact is still being evaluated**, but variability in claimed addresses could point to:\n  - Issues in **our address claim logic**\n  - Potential non-compliance with the **J1939 standard**\n  - Risk to **CARB certification** and broader regulatory requirements",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "consistency_j1939_source_address_claimed"
          },
          "type": "line",
          "title": "Consistency: J1939 Address Claim",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["avg"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \ud83d\udd0c Consistency: CAN Protocols Detected\n\n**Summary**\nMeasures the **average percent of devices** with a **consistent selected CAN protocol** (e.g., J1979) used across sessions. This indicates whether a device is reliably selecting the same diagnostic protocol for communication.\n\n**What to Look For**\n- \u2705 This metric should be **close to 1.0** (or 100%).\n- \u274c Lower values suggest **protocol oscillation** (e.g., switching between J1979 and ISO27145/WWH-OBD) across sessions.\n\n**Customer Impact**\n- \u26a0\ufe0f Inconsistent protocol selection can lead to:\n  - **Different diagnostic sources** being reported from the same vehicle\n  - **Data gaps or unexpected jumps** in metrics\n  - Potential confusion in customer dashboards or during compliance reviews",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "consistency_can_protocol_selected_to_run,consistency_can_protocol_detected_count"
          },
          "type": "line",
          "title": "Consistency: CAN Protocols Detected",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["avg"],
            "color_by": "key"
          }
        },
        {
          "type": "text",
          "content": "### \u26a0\ufe0f [WIP] Consistency: J1708/CAN2 Bus Autodetect Results\n\n**Summary**\nMeasures the **average percent of devices** with **consistent bus autodetection results** over the past 3 days (e.g., J1708 detected on all 3 days). This metric evaluates whether the same diagnostic bus is reliably identified by the device.\n\n**What to Look For**\n- \u2705 Expect this metric to be **close to 1.0** for a stable network environment.\n- \u274c Inconsistency may indicate unstable or incorrect bus autodetection behavior.\n\n**Customer Impact**\n- \u26a0\ufe0f Devices failing to detect a consistent diagnostic bus may not start communication on that network.\n- This leads to **missed diagnostics and broadcast messages**, resulting in **gaps in customer-visible data**.\n\n> \u2139\ufe0f **Note:** This metric is still a **work in progress** and may be subject to changes or further validation.",
          "width": 2,
          "height": 7
        },
        {
          "dataset": "population_stats",
          "parameters": {
            "metric_name": "consistency_j1708_can3_bus_auto_detect_result"
          },
          "type": "line",
          "title": "Consistency: J1708/CAN2 Bus Autodetect Results",
          "width": 4,
          "height": 7,
          "config": {
            "x_axis": "date",
            "y_fields": ["avg"],
            "color_by": "key"
          }
        }
      ]
    }
  ]
}
