{
  "datasets": [
    {
      "name": "bfb79ee5",
      "displayName": "queries.overview.total_events_by_type",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Overview\n",
        "-- View: Total Events (All Types)\n",
        "-- =============================================================================\n",
        "-- Visualization: Counter\n",
        "-- Title: \"Total Events (All Types)\"\n",
        "-- Description: Total count of all eco driving segmented events\n",
        "-- =============================================================================\n",
        "\n",
        "SELECT SUM(event_count) AS total_events\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "82212ef5",
      "displayName": "queries.overview.unique_devices_total",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Overview\n",
        "-- View: Unique Devices\n",
        "-- =============================================================================\n",
        "-- Visualization: Counter\n",
        "-- Title: \"Unique Devices\"\n",
        "-- Description: Total unique devices reporting eco driving events\n",
        "-- =============================================================================\n",
        "\n",
        "SELECT COUNT(DISTINCT object_id) AS unique_devices\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "4e20986e",
      "displayName": "queries.overview.valid_event_rate",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Overview\n",
        "-- View: Valid Event Rate\n",
        "-- =============================================================================\n",
        "-- Visualization: Counter\n",
        "-- Title: \"Valid Event Rate\"\n",
        "-- Description: Percentage of events with valid proto_value\n",
        "-- =============================================================================\n",
        "\n",
        "SELECT\n",
        "    100.0 * SUM(valid_count) / SUM(event_count) AS valid_rate_pct\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "006b0d28",
      "displayName": "queries.overview.events_by_type_summary",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Overview\n",
        "-- View: Events by Type\n",
        "-- =============================================================================\n",
        "-- Visualization: Bar Chart\n",
        "-- Title: \"Events by Type\"\n",
        "-- Description: Total event count breakdown by eco driving event type\n",
        "-- =============================================================================\n",
        "\n",
        "SELECT \n",
        "    event_type, \n",
        "    SUM(event_count) AS event_count\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "GROUP BY event_type\n",
        "ORDER BY event_count DESC\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "51f26246",
      "displayName": "queries.overview.devices_by_type_summary",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Overview\n",
        "-- View: Unique Devices by Type\n",
        "-- =============================================================================\n",
        "-- Visualization: Bar Chart\n",
        "-- Title: \"Unique Devices by Type\"\n",
        "-- Description: Unique device count breakdown by eco driving event type\n",
        "-- =============================================================================\n",
        "\n",
        "SELECT \n",
        "    event_type, \n",
        "    COUNT(DISTINCT object_id) AS unique_devices\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "GROUP BY event_type\n",
        "ORDER BY unique_devices DESC\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "7a2f0477",
      "displayName": "queries.overview.daily_device_trend",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Overview\n",
        "-- View: Daily Unique Devices by Event Type\n",
        "-- =============================================================================\n",
        "-- Visualization: Line Chart\n",
        "-- Title: \"Daily Unique Devices by Event Type\"\n",
        "-- Description: Daily trend of unique devices reporting each event type\n",
        "-- =============================================================================\n",
        "\n",
        "SELECT \n",
        "    event_type, \n",
        "    date AS event_date, \n",
        "    COUNT(DISTINCT object_id) AS unique_devices\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "GROUP BY event_type, date\n",
        "ORDER BY date, event_type\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "53a495df",
      "displayName": "queries.overview.daily_event_trend",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Overview\n",
        "-- View: Daily Event Count by Type\n",
        "-- =============================================================================\n",
        "-- Visualization: Line Chart\n",
        "-- Title: \"Daily Event Count by Type\"\n",
        "-- Description: Daily trend of event counts by type\n",
        "-- =============================================================================\n",
        "\n",
        "SELECT \n",
        "    event_type, \n",
        "    date AS event_date, \n",
        "    SUM(event_count) AS event_count\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "GROUP BY event_type, date\n",
        "ORDER BY date, event_type\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "be5e7bad",
      "displayName": "queries.overview.avg_events_per_device_chart",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Overview\n",
        "-- View: Average Events per Device by Type Over Time\n",
        "-- =============================================================================\n",
        "-- Visualization: Line Chart\n",
        "-- Title: \"Normalized Events per Device Over Time\"\n",
        "-- Description: Daily average, P95, and P99 event counts per device for each event type\n",
        "-- =============================================================================\n",
        "\n",
        "-- Note: Using pre-aggregated data, we compute per-device stats from daily aggregates\n",
        "SELECT\n",
        "    date AS event_date,\n",
        "    event_type,\n",
        "    ROUND(AVG(event_count), 2) AS avg_events_per_device,\n",
        "    ROUND(PERCENTILE_CONT(0.95) WITHIN GROUP (ORDER BY event_count), 2) AS p95_events_per_device,\n",
        "    ROUND(PERCENTILE_CONT(0.99) WITHIN GROUP (ORDER BY event_count), 2) AS p99_events_per_device\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "GROUP BY date, event_type\n",
        "ORDER BY date, event_type\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "d2952e7b",
      "displayName": "queries.overview.normalized_events_per_device",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Overview\n",
        "-- View: Normalized Events per Device by Type\n",
        "-- =============================================================================\n",
        "-- Visualization: Table\n",
        "-- Title: \"Normalized Events per Device by Type\"\n",
        "-- Description: Shows average, P95, and P99 event counts per device for each event type\n",
        "-- =============================================================================\n",
        "\n",
        "WITH device_totals AS (\n",
        "    -- Sum up each device's events across the date range\n",
        "    SELECT \n",
        "        event_type, \n",
        "        object_id, \n",
        "        SUM(event_count) AS event_count\n",
        "    FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "    WHERE date BETWEEN :date.min AND :date.max\n",
        "    GROUP BY event_type, object_id\n",
        ")\n",
        "\n",
        "SELECT\n",
        "    event_type,\n",
        "    COUNT(DISTINCT object_id) AS device_count,\n",
        "    SUM(event_count) AS total_events,\n",
        "    ROUND(AVG(event_count), 2) AS avg_events_per_device,\n",
        "    ROUND(PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY event_count), 2) AS median_events_per_device,\n",
        "    ROUND(PERCENTILE_CONT(0.95) WITHIN GROUP (ORDER BY event_count), 2) AS p95_events_per_device,\n",
        "    ROUND(PERCENTILE_CONT(0.99) WITHIN GROUP (ORDER BY event_count), 2) AS p99_events_per_device,\n",
        "    MIN(event_count) AS min_events_per_device,\n",
        "    MAX(event_count) AS max_events_per_device\n",
        "FROM device_totals\n",
        "GROUP BY event_type\n",
        "ORDER BY total_events DESC\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "73f2c6e1",
      "displayName": "queries.data_health.health_summary_by_type",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Data Health\n",
        "-- View: Data Health Summary by Event Type\n",
        "-- =============================================================================\n",
        "-- Visualization: Table\n",
        "-- Title: \"Data Health Summary by Event Type\"\n",
        "-- Description: Summary of total rows, valid rows, invalid rows, and percentages per event type\n",
        "-- =============================================================================\n",
        "\n",
        "SELECT\n",
        "    event_type,\n",
        "    SUM(event_count) AS total_rows,\n",
        "    SUM(valid_count) AS valid_rows,\n",
        "    SUM(invalid_count) AS invalid_rows,\n",
        "    100.0 * SUM(valid_count) / SUM(event_count) AS percent_valid,\n",
        "    100.0 * SUM(invalid_count) / SUM(event_count) AS percent_invalid\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "GROUP BY event_type\n",
        "ORDER BY total_rows DESC\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "0a1ff3da",
      "displayName": "queries.data_health.daily_invalid_rate",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Data Health\n",
        "-- View: Daily Invalid Rate by Event Type\n",
        "-- =============================================================================\n",
        "-- Visualization: Line Chart\n",
        "-- Title: \"Daily Invalid Rate by Event Type\"\n",
        "-- Description: Daily percentage of invalid rows per event type\n",
        "-- =============================================================================\n",
        "\n",
        "SELECT\n",
        "    event_type,\n",
        "    date AS event_date,\n",
        "    100.0 * SUM(invalid_count) / SUM(event_count) AS percent_invalid\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "GROUP BY event_type, date\n",
        "ORDER BY date, event_type\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "34d565a2",
      "displayName": "queries.data_health.daily_valid_count",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Data Health\n",
        "-- View: Daily Valid Event Count by Type\n",
        "-- =============================================================================\n",
        "-- Visualization: Line Chart\n",
        "-- Title: \"Daily Valid Event Count by Type\"\n",
        "-- Description: Daily count of valid events per type\n",
        "-- =============================================================================\n",
        "\n",
        "SELECT\n",
        "    event_type,\n",
        "    date AS event_date,\n",
        "    SUM(valid_count) AS valid_rows\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "GROUP BY event_type, date\n",
        "ORDER BY date, event_type\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "ecab4dd6",
      "displayName": "queries.duration.duration_stats_by_type",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Duration Analysis\n",
        "-- View: Duration Statistics by Event Type\n",
        "-- =============================================================================\n",
        "-- Visualization: Table\n",
        "-- Title: \"Duration Statistics by Event Type\"\n",
        "-- Description: Min, max, average duration statistics per event type\n",
        "-- =============================================================================\n",
        "\n",
        "-- Note: With pre-aggregated data, we can compute weighted averages and min/max\n",
        "-- but not exact percentiles across the full distribution\n",
        "SELECT\n",
        "    event_type,\n",
        "    SUM(duration_count) AS event_count,\n",
        "    MIN(min_duration_ms) / 1000.0 AS min_duration_s,\n",
        "    MAX(max_duration_ms) / 1000.0 AS max_duration_s,\n",
        "    SUM(sum_duration_ms) / NULLIF(SUM(duration_count), 0) / 1000.0 AS avg_duration_s,\n",
        "    -- Approximate median using weighted average of device-level averages\n",
        "    PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY avg_duration_ms) / 1000.0 AS approx_median_duration_s,\n",
        "    PERCENTILE_CONT(0.95) WITHIN GROUP (ORDER BY avg_duration_ms) / 1000.0 AS approx_p95_duration_s\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "  AND duration_count > 0\n",
        "GROUP BY event_type\n",
        "ORDER BY event_count DESC\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "4de7e88d",
      "displayName": "queries.duration.duration_histogram_cruise_control",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Duration Analysis\n",
        "-- View: Duration Distribution - Cruise Control\n",
        "-- =============================================================================\n",
        "-- Visualization: Bar Chart (Histogram)\n",
        "-- Title: \"Duration Distribution - Cruise Control\"\n",
        "-- Description: Distribution of average durations per device for Cruise Control events\n",
        "-- =============================================================================\n",
        "\n",
        "-- Note: With pre-aggregated data, we show distribution of device-level avg durations\n",
        "SELECT\n",
        "    FLOOR((avg_duration_ms / 1000.0) / 0.5) * 0.5 AS duration_bucket_s,\n",
        "    COUNT(*) AS device_count\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "  AND event_type = 'CruiseControl'\n",
        "  AND avg_duration_ms IS NOT NULL\n",
        "GROUP BY duration_bucket_s\n",
        "ORDER BY duration_bucket_s\n",
        "LIMIT 100\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "50d09a33",
      "displayName": "queries.duration.duration_histogram_hard_acceleration",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Duration Analysis\n",
        "-- View: Duration Distribution - Hard Acceleration\n",
        "-- =============================================================================\n",
        "-- Visualization: Bar Chart (Histogram)\n",
        "-- Title: \"Duration Distribution - Hard Acceleration\"\n",
        "-- Description: Distribution of average durations per device for Hard Acceleration events\n",
        "-- =============================================================================\n",
        "\n",
        "SELECT\n",
        "    FLOOR((avg_duration_ms / 1000.0) / 0.5) * 0.5 AS duration_bucket_s,\n",
        "    COUNT(*) AS device_count\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "  AND event_type = 'HardAcceleration'\n",
        "  AND avg_duration_ms IS NOT NULL\n",
        "GROUP BY duration_bucket_s\n",
        "ORDER BY duration_bucket_s\n",
        "LIMIT 100\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "8eafac08",
      "displayName": "queries.duration.duration_histogram_overspeed",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Duration Analysis\n",
        "-- View: Duration Distribution - Overspeed\n",
        "-- =============================================================================\n",
        "-- Visualization: Bar Chart (Histogram)\n",
        "-- Title: \"Duration Distribution - Overspeed\"\n",
        "-- Description: Distribution of average durations per device for Overspeed events\n",
        "-- =============================================================================\n",
        "\n",
        "SELECT\n",
        "    FLOOR((avg_duration_ms / 1000.0) / 0.5) * 0.5 AS duration_bucket_s,\n",
        "    COUNT(*) AS device_count\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "  AND event_type = 'OverSpeed'\n",
        "  AND avg_duration_ms IS NOT NULL\n",
        "GROUP BY duration_bucket_s\n",
        "ORDER BY duration_bucket_s\n",
        "LIMIT 100\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "a1924dc8",
      "displayName": "queries.duration.duration_histogram_coasting",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Duration Analysis\n",
        "-- View: Duration Distribution - Coasting\n",
        "-- =============================================================================\n",
        "-- Visualization: Bar Chart (Histogram)\n",
        "-- Title: \"Duration Distribution - Coasting\"\n",
        "-- Description: Distribution of average durations per device for Coasting events\n",
        "-- =============================================================================\n",
        "\n",
        "SELECT\n",
        "    FLOOR((avg_duration_ms / 1000.0) / 0.5) * 0.5 AS duration_bucket_s,\n",
        "    COUNT(*) AS device_count\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "  AND event_type = 'Coasting'\n",
        "  AND avg_duration_ms IS NOT NULL\n",
        "GROUP BY duration_bucket_s\n",
        "ORDER BY duration_bucket_s\n",
        "LIMIT 100\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "1e8915b0",
      "displayName": "queries.duration.duration_histogram_wear_free_braking",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Duration Analysis\n",
        "-- View: Duration Distribution - Wear-Free Braking\n",
        "-- =============================================================================\n",
        "-- Visualization: Bar Chart (Histogram)\n",
        "-- Title: \"Duration Distribution - Wear-Free Braking\"\n",
        "-- Description: Distribution of average durations per device for Wear-Free Braking events\n",
        "-- =============================================================================\n",
        "\n",
        "SELECT\n",
        "    FLOOR((avg_duration_ms / 1000.0) / 0.5) * 0.5 AS duration_bucket_s,\n",
        "    COUNT(*) AS device_count\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "  AND event_type = 'WearFreeBraking'\n",
        "  AND avg_duration_ms IS NOT NULL\n",
        "GROUP BY duration_bucket_s\n",
        "ORDER BY duration_bucket_s\n",
        "LIMIT 100\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "a76fde21",
      "displayName": "queries.comparison.full_comparison_summary",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Comparison\n",
        "-- View: Full Event Type Comparison\n",
        "-- =============================================================================\n",
        "-- Visualization: Table\n",
        "-- Title: \"Full Event Type Comparison\"\n",
        "-- Description: Comprehensive comparison of all event types including volume, data quality, and duration metrics\n",
        "-- =============================================================================\n",
        "\n",
        "WITH stats AS (\n",
        "    SELECT\n",
        "        event_type,\n",
        "        SUM(event_count) AS total_rows,\n",
        "        SUM(valid_count) AS valid_rows,\n",
        "        SUM(invalid_count) AS invalid_rows,\n",
        "        COUNT(DISTINCT object_id) AS unique_devices,\n",
        "        SUM(sum_duration_ms) / NULLIF(SUM(duration_count), 0) / 1000.0 AS avg_duration_s,\n",
        "        PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY avg_duration_ms) / 1000.0 AS approx_median_duration_s\n",
        "    FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "    WHERE date BETWEEN :date.min AND :date.max\n",
        "    GROUP BY event_type\n",
        "),\n",
        "totals AS (\n",
        "    SELECT SUM(total_rows) AS grand_total FROM stats\n",
        ")\n",
        "\n",
        "SELECT\n",
        "    s.event_type,\n",
        "    s.total_rows,\n",
        "    s.valid_rows,\n",
        "    s.invalid_rows,\n",
        "    100.0 * s.valid_rows / NULLIF(s.total_rows, 0) AS percent_valid,\n",
        "    s.unique_devices,\n",
        "    s.avg_duration_s,\n",
        "    s.approx_median_duration_s AS median_duration_s,\n",
        "    100.0 * s.total_rows / t.grand_total AS percent_of_total\n",
        "FROM stats s\n",
        "CROSS JOIN totals t\n",
        "ORDER BY s.total_rows DESC\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    },
    {
      "name": "7d709abc",
      "displayName": "queries.comparison.valid_vs_invalid_stacked",
      "queryLines": [
        "-- =============================================================================\n",
        "-- Dashboard: Eco Driving Segmented Events Dashboard\n",
        "-- Tab: Comparison\n",
        "-- View: Valid vs Invalid Rows by Event Type\n",
        "-- =============================================================================\n",
        "-- Visualization: Stacked Bar Chart\n",
        "-- Title: \"Valid vs Invalid Rows by Event Type\"\n",
        "-- Description: Stacked bar showing valid and invalid rows for each event type\n",
        "-- =============================================================================\n",
        "\n",
        "SELECT\n",
        "    event_type,\n",
        "    SUM(valid_count) AS valid_rows,\n",
        "    SUM(invalid_count) AS invalid_rows\n",
        "FROM product_analytics_staging.agg_eco_driving_segmented_events\n",
        "WHERE date BETWEEN :date.min AND :date.max\n",
        "GROUP BY event_type\n",
        "ORDER BY (SUM(valid_count) + SUM(invalid_count)) DESC\n",
        "\n"
      ],
      "parameters": [
        {
          "displayName": "date",
          "keyword": "date",
          "dataType": "DATE",
          "complexType": "RANGE",
          "defaultSelection": {
            "range": {
              "dataType": "DATE",
              "min": {
                "value": "now-30d/d"
              },
              "max": {
                "value": "now/d"
              }
            }
          }
        }
      ]
    }
  ],
  "pages": [
    {
      "name": "34b0d93f",
      "displayName": "Overview",
      "layout": [
        {
          "widget": {
            "name": "f7790687",
            "multilineTextboxSpec": {
              "lines": [
                "## Eco Driving Segmented Events Overview\n",
                "\n",
                "This dashboard monitors Eco Driving segmented events from kinesisstats. Events are generated when the vehicle exhibits specific driving behaviors:\n",
                "\n",
                "- **Cruise Control**: Vehicle using cruise control\n",
                "- **Hard Acceleration**: Aggressive acceleration events\n",
                "- **Overspeed**: Vehicle exceeding speed thresholds\n",
                "- **Coasting**: Vehicle coasting (fuel-efficient driving)\n",
                "- **Wear-Free Braking**: Regenerative or engine braking events\n",
                "\n",
                "Use the date range filter to adjust the time window.\n"
              ]
            }
          },
          "position": {
            "x": 0,
            "y": 0,
            "width": 6,
            "height": 3
          }
        },
        {
          "widget": {
            "name": "dae8e072",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "bfb79ee5",
                  "fields": [
                    {
                      "name": "total_events",
                      "expression": "`total_events`"
                    }
                  ],
                  "disaggregated": true
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "counter",
              "encodings": {
                "value": {
                  "fieldName": "total_events",
                  "rowNumber": 1
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Total Events (All Types)",
                "showDescription": true,
                "description": "Total count of all eco driving segmented events"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 3,
            "width": 2,
            "height": 2
          }
        },
        {
          "widget": {
            "name": "85b8b7ff",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "82212ef5",
                  "fields": [
                    {
                      "name": "unique_devices",
                      "expression": "`unique_devices`"
                    }
                  ],
                  "disaggregated": true
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "counter",
              "encodings": {
                "value": {
                  "fieldName": "unique_devices",
                  "rowNumber": 1
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Unique Devices",
                "showDescription": true,
                "description": "Total unique devices reporting eco driving events"
              }
            }
          },
          "position": {
            "x": 2,
            "y": 3,
            "width": 2,
            "height": 2
          }
        },
        {
          "widget": {
            "name": "b7f1a9af",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "4e20986e",
                  "fields": [
                    {
                      "name": "valid_rate_pct",
                      "expression": "`valid_rate_pct`"
                    }
                  ],
                  "disaggregated": true
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "counter",
              "encodings": {
                "value": {
                  "fieldName": "valid_rate_pct",
                  "rowNumber": 1
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Valid Event Rate",
                "showDescription": true,
                "description": "Percentage of events with valid proto_value"
              }
            }
          },
          "position": {
            "x": 4,
            "y": 3,
            "width": 2,
            "height": 2
          }
        },
        {
          "widget": {
            "name": "9017d8dd",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "006b0d28",
                  "fields": [
                    {
                      "name": "event_type",
                      "expression": "`event_type`"
                    },
                    {
                      "name": "event_count",
                      "expression": "`event_count`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "bar",
              "encodings": {
                "x": {
                  "fieldName": "event_type",
                  "scale": {
                    "type": "categorical"
                  },
                  "axis": {
                    "labelAngle": 45
                  }
                },
                "y": {
                  "fieldName": "event_count",
                  "scale": {
                    "type": "quantitative"
                  },
                  "axis": {
                    "title": "Event Count"
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Events by Type",
                "showDescription": true,
                "description": "Total event count breakdown by eco driving event type"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 5,
            "width": 3,
            "height": 6
          }
        },
        {
          "widget": {
            "name": "b64ada29",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "51f26246",
                  "fields": [
                    {
                      "name": "event_type",
                      "expression": "`event_type`"
                    },
                    {
                      "name": "unique_devices",
                      "expression": "`unique_devices`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "bar",
              "encodings": {
                "x": {
                  "fieldName": "event_type",
                  "scale": {
                    "type": "categorical"
                  },
                  "axis": {
                    "labelAngle": 45
                  }
                },
                "y": {
                  "fieldName": "unique_devices",
                  "scale": {
                    "type": "quantitative"
                  },
                  "axis": {
                    "title": "Unique Devices"
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Unique Devices by Type",
                "showDescription": true,
                "description": "Unique device count breakdown by eco driving event type"
              }
            }
          },
          "position": {
            "x": 3,
            "y": 5,
            "width": 3,
            "height": 6
          }
        },
        {
          "widget": {
            "name": "161f1b2b",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "7a2f0477",
                  "fields": [
                    {
                      "name": "event_type",
                      "expression": "`event_type`"
                    },
                    {
                      "name": "event_date",
                      "expression": "`event_date`"
                    },
                    {
                      "name": "unique_devices",
                      "expression": "`unique_devices`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "line",
              "encodings": {
                "x": {
                  "fieldName": "event_date",
                  "scale": {
                    "type": "temporal"
                  }
                },
                "y": {
                  "fieldName": "unique_devices",
                  "scale": {
                    "type": "quantitative"
                  },
                  "axis": {
                    "title": "Unique Devices"
                  }
                },
                "color": {
                  "fieldName": "event_type",
                  "scale": {
                    "type": "categorical"
                  }
                },
                "label": {
                  "show": false
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Daily Unique Devices by Event Type",
                "showDescription": true,
                "description": "Daily trend of unique devices reporting each event type"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 11,
            "width": 6,
            "height": 6
          }
        },
        {
          "widget": {
            "name": "28c8e4d1",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "53a495df",
                  "fields": [
                    {
                      "name": "event_type",
                      "expression": "`event_type`"
                    },
                    {
                      "name": "event_date",
                      "expression": "`event_date`"
                    },
                    {
                      "name": "event_count",
                      "expression": "`event_count`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "line",
              "encodings": {
                "x": {
                  "fieldName": "event_date",
                  "scale": {
                    "type": "temporal"
                  }
                },
                "y": {
                  "fieldName": "event_count",
                  "scale": {
                    "type": "quantitative"
                  },
                  "axis": {
                    "title": "Event Count"
                  }
                },
                "color": {
                  "fieldName": "event_type",
                  "scale": {
                    "type": "categorical"
                  }
                },
                "label": {
                  "show": false
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Daily Event Count by Type",
                "showDescription": true,
                "description": "Daily trend of event counts by type"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 17,
            "width": 6,
            "height": 6
          }
        },
        {
          "widget": {
            "name": "009bc642",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "be5e7bad",
                  "fields": [
                    {
                      "name": "event_date",
                      "expression": "`event_date`"
                    },
                    {
                      "name": "event_type",
                      "expression": "`event_type`"
                    },
                    {
                      "name": "avg_events_per_device",
                      "expression": "`avg_events_per_device`"
                    },
                    {
                      "name": "p95_events_per_device",
                      "expression": "`p95_events_per_device`"
                    },
                    {
                      "name": "p99_events_per_device",
                      "expression": "`p99_events_per_device`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "line",
              "encodings": {
                "x": {
                  "fieldName": "event_date",
                  "scale": {
                    "type": "temporal"
                  }
                },
                "y": {
                  "fieldName": "avg_events_per_device",
                  "scale": {
                    "type": "quantitative"
                  },
                  "axis": {
                    "title": "Avg Events per Device"
                  }
                },
                "color": {
                  "fieldName": "event_type",
                  "scale": {
                    "type": "categorical"
                  }
                },
                "label": {
                  "show": false
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Avg Events per Device Over Time",
                "showDescription": true,
                "description": "Daily average events per device for each event type - normalized view of device activity over time"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 23,
            "width": 6,
            "height": 6
          }
        },
        {
          "widget": {
            "name": "eb6deeeb",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "be5e7bad",
                  "fields": [
                    {
                      "name": "event_date",
                      "expression": "`event_date`"
                    },
                    {
                      "name": "event_type",
                      "expression": "`event_type`"
                    },
                    {
                      "name": "avg_events_per_device",
                      "expression": "`avg_events_per_device`"
                    },
                    {
                      "name": "p95_events_per_device",
                      "expression": "`p95_events_per_device`"
                    },
                    {
                      "name": "p99_events_per_device",
                      "expression": "`p99_events_per_device`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "line",
              "encodings": {
                "x": {
                  "fieldName": "event_date",
                  "scale": {
                    "type": "temporal"
                  }
                },
                "y": {
                  "fieldName": "p95_events_per_device",
                  "scale": {
                    "type": "quantitative"
                  },
                  "axis": {
                    "title": "P95 Events per Device"
                  }
                },
                "color": {
                  "fieldName": "event_type",
                  "scale": {
                    "type": "categorical"
                  }
                },
                "label": {
                  "show": false
                }
              },
              "frame": {
                "showTitle": true,
                "title": "P95 Events per Device Over Time",
                "showDescription": true,
                "description": "Daily P95 events per device for each event type - shows high-activity device behavior over time"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 29,
            "width": 6,
            "height": 6
          }
        },
        {
          "widget": {
            "name": "e26b2115",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "be5e7bad",
                  "fields": [
                    {
                      "name": "event_date",
                      "expression": "`event_date`"
                    },
                    {
                      "name": "event_type",
                      "expression": "`event_type`"
                    },
                    {
                      "name": "avg_events_per_device",
                      "expression": "`avg_events_per_device`"
                    },
                    {
                      "name": "p95_events_per_device",
                      "expression": "`p95_events_per_device`"
                    },
                    {
                      "name": "p99_events_per_device",
                      "expression": "`p99_events_per_device`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "line",
              "encodings": {
                "x": {
                  "fieldName": "event_date",
                  "scale": {
                    "type": "temporal"
                  }
                },
                "y": {
                  "fieldName": "p99_events_per_device",
                  "scale": {
                    "type": "quantitative"
                  },
                  "axis": {
                    "title": "P99 Events per Device"
                  }
                },
                "color": {
                  "fieldName": "event_type",
                  "scale": {
                    "type": "categorical"
                  }
                },
                "label": {
                  "show": false
                }
              },
              "frame": {
                "showTitle": true,
                "title": "P99 Events per Device Over Time",
                "showDescription": true,
                "description": "Daily P99 events per device for each event type - shows extreme high-activity device behavior over time"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 35,
            "width": 6,
            "height": 6
          }
        },
        {
          "widget": {
            "name": "c67e5560",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "d2952e7b",
                  "fields": [
                    {
                      "name": "event_type",
                      "expression": "`event_type`"
                    },
                    {
                      "name": "device_count",
                      "expression": "`device_count`"
                    },
                    {
                      "name": "total_events",
                      "expression": "`total_events`"
                    },
                    {
                      "name": "avg_events_per_device",
                      "expression": "`avg_events_per_device`"
                    },
                    {
                      "name": "median_events_per_device",
                      "expression": "`median_events_per_device`"
                    },
                    {
                      "name": "p95_events_per_device",
                      "expression": "`p95_events_per_device`"
                    },
                    {
                      "name": "p99_events_per_device",
                      "expression": "`p99_events_per_device`"
                    },
                    {
                      "name": "min_events_per_device",
                      "expression": "`min_events_per_device`"
                    },
                    {
                      "name": "max_events_per_device",
                      "expression": "`max_events_per_device`"
                    }
                  ],
                  "disaggregated": true
                }
              }
            ],
            "spec": {
              "version": 1,
              "widgetType": "table",
              "encodings": {
                "columns": [
                  {
                    "fieldName": "event_type",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "string",
                    "displayAs": "string",
                    "visible": true,
                    "order": 100000,
                    "title": "event_type",
                    "allowSearch": false,
                    "alignContent": "left",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "device_count",
                    "numberFormat": "0",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "integer",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100001,
                    "title": "device_count",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "total_events",
                    "numberFormat": "0",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "integer",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100002,
                    "title": "total_events",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "avg_events_per_device",
                    "numberFormat": "0.00",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "float",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100003,
                    "title": "avg_events_per_device",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "median_events_per_device",
                    "numberFormat": "0.00",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "float",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100004,
                    "title": "median_events_per_device",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "p95_events_per_device",
                    "numberFormat": "0.00",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "float",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100005,
                    "title": "p95_events_per_device",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "p99_events_per_device",
                    "numberFormat": "0.00",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "float",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100006,
                    "title": "p99_events_per_device",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "min_events_per_device",
                    "numberFormat": "0",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "integer",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100007,
                    "title": "min_events_per_device",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "max_events_per_device",
                    "numberFormat": "0",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "integer",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100008,
                    "title": "max_events_per_device",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  }
                ]
              },
              "invisibleColumns": [],
              "allowHTMLByDefault": false,
              "itemsPerPage": 10,
              "paginationSize": "default",
              "condensed": true,
              "withRowNumber": false,
              "frame": {
                "showTitle": true,
                "title": "Normalized Events per Device - Detailed Statistics",
                "showDescription": true,
                "description": "Comprehensive per-device event statistics: device count, total events, avg/median/P95/P99 events per device, and min/max"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 41,
            "width": 6,
            "height": 6
          }
        }
      ],
      "pageType": "PAGE_TYPE_CANVAS"
    },
    {
      "name": "aa57c91e",
      "displayName": "Data Health",
      "layout": [
        {
          "widget": {
            "name": "8469b549",
            "multilineTextboxSpec": {
              "lines": [
                "## Data Health Metrics\n",
                "\n",
                "This tab monitors the health and validity of eco driving event data.\n",
                "\n",
                "**Invalid Rows**: Events where `proto_value IS NULL` and `is_databreak = FALSE` (or NULL). These represent events that failed to deserialize or have missing data.\n",
                "\n",
                "**Data Breaks**: Events where `is_databreak = TRUE`. These represent intentional gaps in data collection.\n",
                "\n",
                "**Valid Events**: Events with non-null `proto_value` that can be used for analysis.\n"
              ]
            }
          },
          "position": {
            "x": 0,
            "y": 0,
            "width": 6,
            "height": 3
          }
        },
        {
          "widget": {
            "name": "2b2b8be3",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "73f2c6e1",
                  "fields": [
                    {
                      "name": "event_type",
                      "expression": "`event_type`"
                    },
                    {
                      "name": "total_rows",
                      "expression": "`total_rows`"
                    },
                    {
                      "name": "valid_rows",
                      "expression": "`valid_rows`"
                    },
                    {
                      "name": "invalid_rows",
                      "expression": "`invalid_rows`"
                    },
                    {
                      "name": "percent_valid",
                      "expression": "`percent_valid`"
                    },
                    {
                      "name": "percent_invalid",
                      "expression": "`percent_invalid`"
                    }
                  ],
                  "disaggregated": true
                }
              }
            ],
            "spec": {
              "version": 1,
              "widgetType": "table",
              "encodings": {
                "columns": [
                  {
                    "fieldName": "event_type",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "string",
                    "displayAs": "string",
                    "visible": true,
                    "order": 100000,
                    "title": "event_type",
                    "allowSearch": false,
                    "alignContent": "left",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "total_rows",
                    "numberFormat": "0",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "integer",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100001,
                    "title": "total_rows",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "valid_rows",
                    "numberFormat": "0",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "integer",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100002,
                    "title": "valid_rows",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "invalid_rows",
                    "numberFormat": "0",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "integer",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100003,
                    "title": "invalid_rows",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "percent_valid",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "string",
                    "displayAs": "string",
                    "visible": true,
                    "order": 100004,
                    "title": "percent_valid",
                    "allowSearch": false,
                    "alignContent": "left",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "percent_invalid",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "string",
                    "displayAs": "string",
                    "visible": true,
                    "order": 100005,
                    "title": "percent_invalid",
                    "allowSearch": false,
                    "alignContent": "left",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  }
                ]
              },
              "invisibleColumns": [],
              "allowHTMLByDefault": false,
              "itemsPerPage": 10,
              "paginationSize": "default",
              "condensed": true,
              "withRowNumber": false,
              "frame": {
                "showTitle": true,
                "title": "Data Health Summary by Event Type",
                "showDescription": true,
                "description": "Summary of total rows, valid rows, invalid rows, and percentages per event type"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 3,
            "width": 6,
            "height": 6
          }
        },
        {
          "widget": {
            "name": "efc85054",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "0a1ff3da",
                  "fields": [
                    {
                      "name": "event_type",
                      "expression": "`event_type`"
                    },
                    {
                      "name": "event_date",
                      "expression": "`event_date`"
                    },
                    {
                      "name": "percent_invalid",
                      "expression": "`percent_invalid`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "line",
              "encodings": {
                "x": {
                  "fieldName": "event_date",
                  "scale": {
                    "type": "temporal"
                  }
                },
                "y": {
                  "fieldName": "percent_invalid",
                  "scale": {
                    "type": "quantitative"
                  },
                  "axis": {
                    "title": "Invalid Rate (%)"
                  }
                },
                "color": {
                  "fieldName": "event_type",
                  "scale": {
                    "type": "categorical"
                  }
                },
                "label": {
                  "show": false
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Daily Invalid Rate by Event Type",
                "showDescription": true,
                "description": "Daily percentage of invalid rows per event type"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 9,
            "width": 6,
            "height": 6
          }
        },
        {
          "widget": {
            "name": "0e6aaf21",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "34d565a2",
                  "fields": [
                    {
                      "name": "event_type",
                      "expression": "`event_type`"
                    },
                    {
                      "name": "event_date",
                      "expression": "`event_date`"
                    },
                    {
                      "name": "valid_rows",
                      "expression": "`valid_rows`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "line",
              "encodings": {
                "x": {
                  "fieldName": "event_date",
                  "scale": {
                    "type": "temporal"
                  }
                },
                "y": {
                  "fieldName": "valid_rows",
                  "scale": {
                    "type": "quantitative"
                  },
                  "axis": {
                    "title": "Valid Event Count"
                  }
                },
                "color": {
                  "fieldName": "event_type",
                  "scale": {
                    "type": "categorical"
                  }
                },
                "label": {
                  "show": false
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Daily Valid Event Count by Type",
                "showDescription": true,
                "description": "Daily count of valid events per type"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 15,
            "width": 6,
            "height": 6
          }
        }
      ],
      "pageType": "PAGE_TYPE_CANVAS"
    },
    {
      "name": "349a5ae4",
      "displayName": "Duration Analysis",
      "layout": [
        {
          "widget": {
            "name": "0e62ea49",
            "multilineTextboxSpec": {
              "lines": [
                "## Duration Analysis\n",
                "\n",
                "This tab analyzes the duration distribution of eco driving segmented events.\n",
                "\n",
                "Duration is extracted from `obd_segmented_event.duration_ms` and converted to seconds. Events are bucketed into 0.5-second intervals for histogram analysis.\n"
              ]
            }
          },
          "position": {
            "x": 0,
            "y": 0,
            "width": 6,
            "height": 2
          }
        },
        {
          "widget": {
            "name": "af1474f0",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "ecab4dd6",
                  "fields": [
                    {
                      "name": "event_type",
                      "expression": "`event_type`"
                    },
                    {
                      "name": "event_count",
                      "expression": "`event_count`"
                    },
                    {
                      "name": "min_duration_s",
                      "expression": "`min_duration_s`"
                    },
                    {
                      "name": "max_duration_s",
                      "expression": "`max_duration_s`"
                    },
                    {
                      "name": "avg_duration_s",
                      "expression": "`avg_duration_s`"
                    },
                    {
                      "name": "approx_median_duration_s",
                      "expression": "`approx_median_duration_s`"
                    },
                    {
                      "name": "approx_p95_duration_s",
                      "expression": "`approx_p95_duration_s`"
                    }
                  ],
                  "disaggregated": true
                }
              }
            ],
            "spec": {
              "version": 1,
              "widgetType": "table",
              "encodings": {
                "columns": [
                  {
                    "fieldName": "event_type",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "string",
                    "displayAs": "string",
                    "visible": true,
                    "order": 100000,
                    "title": "event_type",
                    "allowSearch": false,
                    "alignContent": "left",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "event_count",
                    "numberFormat": "0",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "integer",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100001,
                    "title": "event_count",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "min_duration_s",
                    "numberFormat": "0.00",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "float",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100002,
                    "title": "min_duration_s",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "max_duration_s",
                    "numberFormat": "0.00",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "float",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100003,
                    "title": "max_duration_s",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "avg_duration_s",
                    "numberFormat": "0.00",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "float",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100004,
                    "title": "avg_duration_s",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "approx_median_duration_s",
                    "numberFormat": "0.00",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "float",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100005,
                    "title": "approx_median_duration_s",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "approx_p95_duration_s",
                    "numberFormat": "0.00",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "float",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100006,
                    "title": "approx_p95_duration_s",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  }
                ]
              },
              "invisibleColumns": [],
              "allowHTMLByDefault": false,
              "itemsPerPage": 10,
              "paginationSize": "default",
              "condensed": true,
              "withRowNumber": false,
              "frame": {
                "showTitle": true,
                "title": "Duration Statistics by Event Type",
                "showDescription": true,
                "description": "Min, max, average, median, and percentile duration statistics per event type"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 2,
            "width": 6,
            "height": 5
          }
        },
        {
          "widget": {
            "name": "7ae0d15c",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "4de7e88d",
                  "fields": [
                    {
                      "name": "duration_bucket_s",
                      "expression": "`duration_bucket_s`"
                    },
                    {
                      "name": "device_count",
                      "expression": "`device_count`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "bar",
              "encodings": {
                "x": {
                  "fieldName": "duration_bucket_s",
                  "scale": {
                    "type": "categorical"
                  },
                  "axis": {
                    "labelAngle": 45
                  }
                },
                "y": {
                  "fieldName": "device_count",
                  "scale": {
                    "type": "quantitative"
                  },
                  "axis": {
                    "title": "Device Count"
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Duration Distribution - Cruise Control",
                "showDescription": true,
                "description": "Distribution of avg durations per device for Cruise Control (0.5s buckets)"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 7,
            "width": 3,
            "height": 5
          }
        },
        {
          "widget": {
            "name": "91522c92",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "50d09a33",
                  "fields": [
                    {
                      "name": "duration_bucket_s",
                      "expression": "`duration_bucket_s`"
                    },
                    {
                      "name": "device_count",
                      "expression": "`device_count`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "bar",
              "encodings": {
                "x": {
                  "fieldName": "duration_bucket_s",
                  "scale": {
                    "type": "categorical"
                  },
                  "axis": {
                    "labelAngle": 45
                  }
                },
                "y": {
                  "fieldName": "device_count",
                  "scale": {
                    "type": "quantitative"
                  },
                  "axis": {
                    "title": "Device Count"
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Duration Distribution - Hard Acceleration",
                "showDescription": true,
                "description": "Distribution of avg durations per device for Hard Acceleration (0.5s buckets)"
              }
            }
          },
          "position": {
            "x": 3,
            "y": 7,
            "width": 3,
            "height": 5
          }
        },
        {
          "widget": {
            "name": "b4957074",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "8eafac08",
                  "fields": [
                    {
                      "name": "duration_bucket_s",
                      "expression": "`duration_bucket_s`"
                    },
                    {
                      "name": "device_count",
                      "expression": "`device_count`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "bar",
              "encodings": {
                "x": {
                  "fieldName": "duration_bucket_s",
                  "scale": {
                    "type": "categorical"
                  },
                  "axis": {
                    "labelAngle": 45
                  }
                },
                "y": {
                  "fieldName": "device_count",
                  "scale": {
                    "type": "quantitative"
                  },
                  "axis": {
                    "title": "Device Count"
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Duration Distribution - Overspeed",
                "showDescription": true,
                "description": "Distribution of avg durations per device for Overspeed (0.5s buckets)"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 12,
            "width": 3,
            "height": 5
          }
        },
        {
          "widget": {
            "name": "f5145805",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "a1924dc8",
                  "fields": [
                    {
                      "name": "duration_bucket_s",
                      "expression": "`duration_bucket_s`"
                    },
                    {
                      "name": "device_count",
                      "expression": "`device_count`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "bar",
              "encodings": {
                "x": {
                  "fieldName": "duration_bucket_s",
                  "scale": {
                    "type": "categorical"
                  },
                  "axis": {
                    "labelAngle": 45
                  }
                },
                "y": {
                  "fieldName": "device_count",
                  "scale": {
                    "type": "quantitative"
                  },
                  "axis": {
                    "title": "Device Count"
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Duration Distribution - Coasting",
                "showDescription": true,
                "description": "Distribution of avg durations per device for Coasting (0.5s buckets)"
              }
            }
          },
          "position": {
            "x": 3,
            "y": 12,
            "width": 3,
            "height": 5
          }
        },
        {
          "widget": {
            "name": "e3e17dfc",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "1e8915b0",
                  "fields": [
                    {
                      "name": "duration_bucket_s",
                      "expression": "`duration_bucket_s`"
                    },
                    {
                      "name": "device_count",
                      "expression": "`device_count`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "bar",
              "encodings": {
                "x": {
                  "fieldName": "duration_bucket_s",
                  "scale": {
                    "type": "categorical"
                  },
                  "axis": {
                    "labelAngle": 45
                  }
                },
                "y": {
                  "fieldName": "device_count",
                  "scale": {
                    "type": "quantitative"
                  },
                  "axis": {
                    "title": "Device Count"
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Duration Distribution - Wear-Free Braking",
                "showDescription": true,
                "description": "Distribution of avg durations per device for Wear-Free Braking (0.5s buckets)"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 17,
            "width": 3,
            "height": 5
          }
        }
      ],
      "pageType": "PAGE_TYPE_CANVAS"
    },
    {
      "name": "afeea84f",
      "displayName": "Comparison",
      "layout": [
        {
          "widget": {
            "name": "df542d7b",
            "multilineTextboxSpec": {
              "lines": [
                "## Event Type Comparison\n",
                "\n",
                "This tab provides a unified view comparing all 5 eco driving event types:\n",
                "- **CruiseControl**\n",
                "- **HardAcceleration**\n",
                "- **OverSpeed**\n",
                "- **Coasting**\n",
                "- **WearFreeBraking**\n",
                "\n",
                "Use this to identify which event types have the most volume, best data quality, and typical duration characteristics.\n"
              ]
            }
          },
          "position": {
            "x": 0,
            "y": 0,
            "width": 6,
            "height": 2
          }
        },
        {
          "widget": {
            "name": "b94cd243",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "a76fde21",
                  "fields": [
                    {
                      "name": "event_type",
                      "expression": "`event_type`"
                    },
                    {
                      "name": "total_rows",
                      "expression": "`total_rows`"
                    },
                    {
                      "name": "valid_rows",
                      "expression": "`valid_rows`"
                    },
                    {
                      "name": "invalid_rows",
                      "expression": "`invalid_rows`"
                    },
                    {
                      "name": "percent_valid",
                      "expression": "`percent_valid`"
                    },
                    {
                      "name": "unique_devices",
                      "expression": "`unique_devices`"
                    },
                    {
                      "name": "avg_duration_s",
                      "expression": "`avg_duration_s`"
                    },
                    {
                      "name": "median_duration_s",
                      "expression": "`median_duration_s`"
                    },
                    {
                      "name": "percent_of_total",
                      "expression": "`percent_of_total`"
                    }
                  ],
                  "disaggregated": true
                }
              }
            ],
            "spec": {
              "version": 1,
              "widgetType": "table",
              "encodings": {
                "columns": [
                  {
                    "fieldName": "event_type",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "string",
                    "displayAs": "string",
                    "visible": true,
                    "order": 100000,
                    "title": "event_type",
                    "allowSearch": false,
                    "alignContent": "left",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "total_rows",
                    "numberFormat": "0",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "integer",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100001,
                    "title": "total_rows",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "valid_rows",
                    "numberFormat": "0",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "integer",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100002,
                    "title": "valid_rows",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "invalid_rows",
                    "numberFormat": "0",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "integer",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100003,
                    "title": "invalid_rows",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "percent_valid",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "string",
                    "displayAs": "string",
                    "visible": true,
                    "order": 100004,
                    "title": "percent_valid",
                    "allowSearch": false,
                    "alignContent": "left",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "unique_devices",
                    "numberFormat": "0",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "integer",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100005,
                    "title": "unique_devices",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "avg_duration_s",
                    "numberFormat": "0.00",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "float",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100006,
                    "title": "avg_duration_s",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "median_duration_s",
                    "numberFormat": "0.00",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "float",
                    "displayAs": "number",
                    "visible": true,
                    "order": 100007,
                    "title": "median_duration_s",
                    "allowSearch": false,
                    "alignContent": "right",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  },
                  {
                    "fieldName": "percent_of_total",
                    "booleanValues": [
                      "false",
                      "true"
                    ],
                    "imageUrlTemplate": "{{ @ }}",
                    "imageTitleTemplate": "{{ @ }}",
                    "imageWidth": "",
                    "imageHeight": "",
                    "linkUrlTemplate": "{{ @ }}",
                    "linkTextTemplate": "{{ @ }}",
                    "linkTitleTemplate": "{{ @ }}",
                    "linkOpenInNewTab": true,
                    "type": "string",
                    "displayAs": "string",
                    "visible": true,
                    "order": 100008,
                    "title": "percent_of_total",
                    "allowSearch": false,
                    "alignContent": "left",
                    "allowHTML": false,
                    "highlightLinks": false,
                    "useMonospaceFont": false,
                    "preserveWhitespace": false
                  }
                ]
              },
              "invisibleColumns": [],
              "allowHTMLByDefault": false,
              "itemsPerPage": 10,
              "paginationSize": "default",
              "condensed": true,
              "withRowNumber": false,
              "frame": {
                "showTitle": true,
                "title": "Full Event Type Comparison",
                "showDescription": true,
                "description": "Comprehensive comparison of all event types including volume, data quality, and duration metrics"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 2,
            "width": 6,
            "height": 8
          }
        },
        {
          "widget": {
            "name": "8b98a7ba",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "7d709abc",
                  "fields": [
                    {
                      "name": "event_type",
                      "expression": "`event_type`"
                    },
                    {
                      "name": "valid_rows",
                      "expression": "`valid_rows`"
                    },
                    {
                      "name": "invalid_rows",
                      "expression": "`invalid_rows`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "bar",
              "encodings": {
                "x": {
                  "fieldName": "event_type",
                  "scale": {
                    "type": "categorical"
                  },
                  "axis": {
                    "labelAngle": 45
                  }
                },
                "y": {
                  "scale": {
                    "type": "quantitative"
                  },
                  "fields": [
                    {
                      "fieldName": "valid_rows"
                    },
                    {
                      "fieldName": "invalid_rows"
                    }
                  ],
                  "axis": {
                    "title": "Row Count"
                  },
                  "stackType": "stacked"
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Valid vs Invalid Rows by Event Type",
                "showDescription": true,
                "description": "Stacked bar showing valid and invalid rows for each event type"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 10,
            "width": 6,
            "height": 6
          }
        }
      ],
      "pageType": "PAGE_TYPE_CANVAS"
    },
    {
      "name": "3f5946c9",
      "displayName": "Global Filters",
      "layout": [
        {
          "name": "22399964",
          "position": {
            "x": 0,
            "y": 0,
            "width": 2,
            "height": 2
          },
          "widget": {
            "name": "76dac629",
            "queries": [
              {
                "name": "param_bfb79ee5_date",
                "query": {
                  "datasetName": "bfb79ee5",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_82212ef5_date",
                "query": {
                  "datasetName": "82212ef5",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_4e20986e_date",
                "query": {
                  "datasetName": "4e20986e",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_006b0d28_date",
                "query": {
                  "datasetName": "006b0d28",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_51f26246_date",
                "query": {
                  "datasetName": "51f26246",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_7a2f0477_date",
                "query": {
                  "datasetName": "7a2f0477",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_53a495df_date",
                "query": {
                  "datasetName": "53a495df",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_be5e7bad_date",
                "query": {
                  "datasetName": "be5e7bad",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_d2952e7b_date",
                "query": {
                  "datasetName": "d2952e7b",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_73f2c6e1_date",
                "query": {
                  "datasetName": "73f2c6e1",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_0a1ff3da_date",
                "query": {
                  "datasetName": "0a1ff3da",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_34d565a2_date",
                "query": {
                  "datasetName": "34d565a2",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_ecab4dd6_date",
                "query": {
                  "datasetName": "ecab4dd6",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_4de7e88d_date",
                "query": {
                  "datasetName": "4de7e88d",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_50d09a33_date",
                "query": {
                  "datasetName": "50d09a33",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_8eafac08_date",
                "query": {
                  "datasetName": "8eafac08",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_a1924dc8_date",
                "query": {
                  "datasetName": "a1924dc8",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_1e8915b0_date",
                "query": {
                  "datasetName": "1e8915b0",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_a76fde21_date",
                "query": {
                  "datasetName": "a76fde21",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "param_7d709abc_date",
                "query": {
                  "datasetName": "7d709abc",
                  "parameters": [
                    {
                      "name": "date",
                      "keyword": "date"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "filter-date-range-picker",
              "encodings": {
                "fields": [
                  {
                    "parameterName": "date",
                    "queryName": "param_bfb79ee5_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_82212ef5_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_4e20986e_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_006b0d28_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_51f26246_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_7a2f0477_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_53a495df_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_be5e7bad_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_d2952e7b_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_73f2c6e1_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_0a1ff3da_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_34d565a2_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_ecab4dd6_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_4de7e88d_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_50d09a33_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_8eafac08_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_a1924dc8_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_1e8915b0_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_a76fde21_date"
                  },
                  {
                    "parameterName": "date",
                    "queryName": "param_7d709abc_date"
                  }
                ]
              },
              "frame": {
                "showTitle": true,
                "title": "Date Range"
              },
              "selection": {
                "defaultSelection": {
                  "range": {
                    "dataType": "DATE",
                    "min": {
                      "value": "now-30d/d"
                    },
                    "max": {
                      "value": "now/d"
                    }
                  }
                }
              }
            }
          }
        }
      ],
      "pageType": "PAGE_TYPE_GLOBAL_FILTERS"
    }
  ],
  "uiSettings": {
    "theme": {
      "widgetHeaderAlignment": "ALIGNMENT_UNSPECIFIED"
    },
    "applyModeEnabled": false
  },
  "parameters": [
    {
      "displayName": "date",
      "keyword": "date",
      "dataType": "DATE",
      "complexType": "RANGE",
      "defaultSelection": {
        "range": {
          "dataType": "DATE",
          "min": {
            "value": "now-30d/d"
          },
          "max": {
            "value": "now/d"
          }
        }
      }
    }
  ]
}
