{
  "table": "databricks",
  "owner": "DataPlatform",
  "description": "Raw billing table containing monthly databricks bills sent by Databricks daily at around 8am UTC. Contains usage from both all workspaces, so US and EU usage is here. See https://docs.databricks.com/administration-guide/account-settings/usage-analysis.html.",
  "database": "billing",
  "region_to_location": {
    "us-west-2": "s3://samsara-databricks-billing/automated_billing_delivery/billable-usage/csv"
  },
  "datatype": "csv",
  "schema": [
    {
      "name": "workspaceId",
      "type": "long",
      "description": "The Databricks workspace ID that this usage comes from"
    },
    {
      "name": "timestamp",
      "type": "timestamp",
      "description": "The end of the hour for the provided usage (e.g if usage ends at 10:30, this value would say 10:59)"
    },
    {
      "name": "clusterId",
      "type": "string",
      "description": "The unique ID of the databricks cluster (automated or interactive) used for this usage."
    },
    {
      "name": "clusterName",
      "type": "string",
      "description": "The name of the databricks cluster (automated or interactive) for the cluster corresponding to clusterId."
    },
    {
      "name": "clusterNodeType",
      "type": "string",
      "description": "Instance type of the cluster (e.g i3.xlarge). If the usage uses a hybrid pool or a fleet pool where the driver and worker nodes use different instance types, then there will be multiple rows in this table for each instance type used."
    },
    {
      "name": "clusterOwnerUserId",
      "type": "string",
      "description": "ID of the user who created the cluster. Note that for jobs created by code checked into the repo, this is most likely a bot user"
    },
    {
      "name": "clusterCustomTags",
      "type": "string",
      "description": "A series of tags we set on jobs and clusters to identify and categorize them"
    },
    {
      "name": "sku",
      "type": "string",
      "description": "The databricks billing SKU. See https://docs.databricks.com/administration-guide/account-settings/usage-analysis.html#billing-skus (all of ours are ENTERPRISE_* after ~Feb 2020)."
    },
    {
      "name": "dbus",
      "type": "double",
      "description": "The amount of DBUs (databricks units) used for this usage during this hour."
    },
    {
      "name": "machineHours",
      "type": "double",
      "description": "Total number of machine hours used by all containers in the cluster."
    },
    {
      "name": "clusterOwnerUserName",
      "type": "string",
      "description": "Email of the user who created the cluster (see clusterOwnerUserId column)."
    },
    {
      "name": "tags",
      "type": "string",
      "description": "This is a superset of clusterCustomTags; it also includes default tags that we or Databricks have set on all clusters."
    }
  ],
  "csv": {
    "escape": "\"",
    "header": true
  }
}
