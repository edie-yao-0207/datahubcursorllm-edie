{
  "view": "agg_product_scorecard_safety_mpr_event_global",
  "owner": "DataEngineering",
  "description": "This view contains the safety MPR metrics data at the event level",
  "database": "product_analytics",
  "regions": ["us-west-2"],
  "schema": [
    { "name": "date", "type": "string", "description": "Date partition" },
    { "name": "period_start", "type": "string", "description": "Start of period" },
    { "name": "period_end", "type": "string", "description": "End of period" },
    { "name": "sam_number", "type": "string", "description": "SAM number for set of orgs" },
    { "name": "account_size_segment", "type": "string", "description": "Account size segment of grouping" },
    { "name": "account_arr_segment", "type": "string", "description": "Account ARR segment of grouping" },
    { "name": "account_billing_country", "type": "string", "description": "Billing country of the account" },
    { "name": "account_industry", "type": "string", "description": "Account industry of grouping" },
    { "name": "industry_vertical", "type": "string", "description": "Industry vertical of grouping" },
    {
      "name": "is_paid_safety_customer",
      "type": "boolean",
      "description": "Whether the SAM has Safety licenses or not"
    },
    {
      "name": "is_paid_telematics_customer",
      "type": "boolean",
      "description": "Whether the SAM has Telematics licenses or not"
    },
    { "name": "is_paid_stce_customer", "type": "boolean", "description": "Whether the SAM has STCE licenses or not" },
    { "name": "account_csm_email", "type": "string", "description": "CSM email of the account" },
    { "name": "account_name", "type": "string", "description": "Name of the account" },
    { "name": "account_id", "type": "string", "description": "ID of the account" },
    { "name": "account_created_date", "type": "string", "description": "Creation date of the account" },
    {
      "name": "dual_facing_cam",
      "type": "boolean",
      "description": "Whether account has at least one dual-facing cam or not"
    },
    {
      "name": "account_renewal_12mo",
      "type": "boolean",
      "description": "Whether account has 50% of their licenses up for renewal within the next 12 months or not"
    },
    { "name": "event_type", "type": "string", "description": "Type of safety event" },
    {
      "name": "dual_facing_event_type",
      "type": "boolean",
      "description": "Whether the event is a dual-facing event or not"
    },
    {
      "name": "event_type_enabled",
      "type": "boolean",
      "description": "Whether the event type is enabled for the account or not"
    },
    {
      "name": "in_cab_alerts_enabled",
      "type": "boolean",
      "description": "Whether in cab alerts for the event type are enabled for the account or not"
    },
    {
      "name": "send_to_safety_inbox_enabled",
      "type": "boolean",
      "description": "Whether the event type has send to safety inbox enabled (only relevant for speeding)"
    },
    {
      "name": "detection_log_events",
      "type": "long",
      "description": "Total instances of detection log events for the given safety event in the time period"
    },
    {
      "name": "in_cab_alerts",
      "type": "long",
      "description": "Total instances of incab-alerts/nudges for the given safety event in the time period"
    },
    {
      "name": "events_without_alert",
      "type": "long",
      "description": "Total instances of triage events without in-cab alerts for the given safety event in the time period"
    },
    {
      "name": "total_detections",
      "type": "long",
      "description": "Sum of triage events without in-cab alert and in-cab alerts for the given safety event in the time period"
    },
    {
      "name": "detection_log_events_caps",
      "type": "long",
      "description": "Total instances of detection log events filtered by cap for the given safety event in the time period"
    },
    {
      "name": "detection_log_events_threshold",
      "type": "long",
      "description": "Total instances of detection log events filtered by threshold for the given safety event in the time period"
    },
    {
      "name": "detection_log_events_nudges",
      "type": "long",
      "description": "Total instances of detection log events filtered for low nudges for the given safety event in the time period"
    },
    {
      "name": "detection_log_events_speed",
      "type": "long",
      "description": "Total instances of detection log events filtered for low speed for the given safety event in the time period"
    },
    {
      "name": "detection_log_events_confidence",
      "type": "long",
      "description": "Total instances of detection log events filtered for low confidence for the given safety event in the time period"
    },
    {
      "name": "detection_log_events_severity",
      "type": "long",
      "description": "Total instances of detection log events filtered for low severity for the given safety event in the time period"
    },
    {
      "name": "detection_log_events_ser",
      "type": "long",
      "description": "Total instances of detection log events filtered for SER for the given safety event in the time period"
    },
    {
      "name": "detection_log_events_incab",
      "type": "long",
      "description": "Total instances of detection log events filtered for incab only for the given safety event in the time period"
    },
    {
      "name": "detection_log_events_other",
      "type": "long",
      "description": "Total instances of detection log events filtered for another reason for the given safety event in the time period"
    },
    {
      "name": "detection_log_events_no_filter",
      "type": "long",
      "description": "Total instances of detection log events with no filter reason for the given safety event in the time period"
    },
    {
      "name": "inbox_events",
      "type": "long",
      "description": "Total number of triage events for the given event type for the time period"
    },
    {
      "name": "inbox_events_viewed",
      "type": "long",
      "description": "Total number of viewed triage events for the given event type for the time period"
    },
    {
      "name": "inbox_events_dismissed",
      "type": "long",
      "description": "Total number of dismissed triage events for the given event type for the time period"
    },
    {
      "name": "inbox_events_viewed_dismissed",
      "type": "long",
      "description": "Total number of viewed and dismissed triage events for the given event type for the time period"
    },
    {
      "name": "inbox_events_viewed_not_useful",
      "type": "long",
      "description": "Total number of viewed and not useful triage events for the given event type for the time period"
    },
    {
      "name": "eligible_events",
      "type": "long",
      "description": "Count of non-dismissed events for the given event type for the time period"
    },
    {
      "name": "eligible_events_with_driver",
      "type": "long",
      "description": "Count of non-dismissed events with a driver assigned for the given event type for the time period"
    },
    {
      "name": "manager_led_coaching_sessions",
      "type": "long",
      "description": "Total number of manager-led coaching sessions initiated in the account in the month"
    },
    {
      "name": "manager_led_coaching_events",
      "type": "long",
      "description": "Total number of manager-led coaching events in the account that were initiated in the month"
    },
    {
      "name": "manager_led_coaching_events_completed",
      "type": "long",
      "description": "Total number of completed manager-led coaching events in the account that were initiated in the month"
    },
    {
      "name": "manager_led_coaches",
      "type": "long",
      "description": "Total number of coaches involved in manager-led coaching sessions in the account that were initiated in the month"
    },
    {
      "name": "manager_led_coaches_coaching_on_time",
      "type": "long",
      "description": "Total number of coaches involved in manager-led coaching sessions that completed on time in the account that were initiated in the month"
    },
    {
      "name": "completed_manager_led_coaching_sessions",
      "type": "long",
      "description": "Total number of completed manager-led coaching sessions in the account that were initiated in the month"
    },
    {
      "name": "completed_manager_led_coaching_sessions_14d",
      "type": "long",
      "description": "Total number of completed within 14 days manager-led coaching sessions in the account that were initiated in the month"
    },
    {
      "name": "manager_led_coaching_drivers",
      "type": "long",
      "description": "Total number of drivers who were assigned to manager-led coaching sessions in the account that were initiated in the month"
    },
    {
      "name": "manager_led_coaching_drivers_coached",
      "type": "long",
      "description": "Total number of drivers who completed manager-led coaching sessions in the account that were initiated in the month"
    },
    {
      "name": "self_coaching_events",
      "type": "long",
      "description": "Total number of self-coaching events in the account that were initiated in the month"
    },
    {
      "name": "self_coaching_events_completed",
      "type": "long",
      "description": "Total number of completed self-coaching events in the account that were initiated in the month"
    },
    {
      "name": "total_drivers_assigned_self_coaching",
      "type": "long",
      "description": "Total number of drivers who were assigned to self-coaching events in the account that were initiated in the month"
    },
    {
      "name": "total_drivers_completed_self_coaching",
      "type": "long",
      "description": "Total number of drivers who completed self-coaching events in the account that were initiated in the month"
    },
    {
      "name": "miles_event",
      "type": "double",
      "description": "Total number of miles covered by trips for devices enabled for the given event type in the account for the month"
    }
  ],
  "dependencies": [
    {
      "external": true,
      "dbname": "product_analytics",
      "tablename": "agg_product_scorecard_safety_mpr_event_global_monthly",
      "type": "table"
    }
  ]
}
