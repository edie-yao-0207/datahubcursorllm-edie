{
  "view": "ag2x_daily_summary",
  "owner": "DataEngineering",
  "description": "Compiles a set of daily metrics about gateways of the AG2x familly.",
  "database": "dataprep_assets",
  "schema": [
    {
      "name": "date",
      "type": "string",
      "description": "The date the data measured."
    },
    {
      "name": "org_id",
      "type": "long",
      "description": "The id of the organization the gateway belongs to.'"
    },
    {
      "name": "org_type",
      "type": "long",
      "description": "The organization type (0 = external, 1 = internal)."
    },
    {
      "name": "org_name",
      "type": "string",
      "description": "The orgnaization name."
    },
    {
      "name": "device_id",
      "type": "long",
      "description": "The id of the assets the gateway is installed on."
    },
    {
      "name": "product_id",
      "type": "long",
      "description": "The id of the product type the gateway belongs to."
    },
    {
      "name": "ag_serial_clean",
      "type": "string",
      "description": "The gateway serial number."
    },
    {
      "name": "active_builds_on_day",
      "type": "long",
      "description": "The firmware builds that were active on this device on that day."
    },
    {
      "name": "latest_build_on_day",
      "type": "string",
      "description": "The latest firmware build active on the device on that day."
    },
    {
      "name": "trip_count",
      "type": "long",
      "description": "The number of trips the asset went on during that day."
    },
    {
      "name": "total_distance",
      "type": "long",
      "description": "The total travelled distance on that day."
    },
    {
      "name": "can_bus_type",
      "type": "long",
      "description": "The protocol used on the asset CAN BUS."
    },
    {
      "name": "cable_type",
      "type": "long",
      "description": "The type of cable used to connect the gateway to the asset."
    }
  ],
  "dependencies": [
    {
      "external": true,
      "dbname": "dataprep",
      "tablename": "device_builds",
      "type": "table"
    },
    {
      "external": true,
      "dbname": "dataprep",
      "tablename": "device_cables",
      "schema_path": "dataprep/ingestion/device_cables.metadata.json",
      "type": "table"
    },
    {
      "external": true,
      "dbname": "dataprep",
      "tablename": "device_canbus",
      "type": "table"
    },
    {
      "external": true,
      "dbname": "dataprep",
      "tablename": "active_devices",
      "type": "table"
    },
    {
      "external": true,
      "dbname": "productsdb",
      "tablename": "gateways",
      "type": "table"
    },
    {
      "external": true,
      "dbname": "clouddb",
      "tablename": "organizations",
      "type": "table"
    },
    {
      "external": true,
      "dbname": "dataprep",
      "tablename": "customer_metadata",
      "schema_path": "dataprep/business/customer_metadata.metadata.json",
      "type": "table"
    }
  ]
}
