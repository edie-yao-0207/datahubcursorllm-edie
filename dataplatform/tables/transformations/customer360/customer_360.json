{
  "name": "customer360.customer_360",
  "owner": "DataEngineering",
  "nonproduction": true,
  "description": "Create a row for each date customer that first had a heartbeat to the current date. This is a daily view for each customer and all the data in each row pertains to that customer on that specific day.",
  "disabled_regions": ["eu-west-1", "ca-central-1"],
  "dependencies": [
    {
      "dbname": "customer360",
      "tablename": "org_dates",
      "type": "table"
    },
    {
      "external": true,
      "dbname": "customer360_from_eu_west_1",
      "tablename": "org_dates",
      "type": "table"
    },
    {
      "dbname": "customer360",
      "tablename": "customer_health_tracker",
      "type": "table"
    },
    {
      "external": true,
      "dbname": "customer360_from_eu_west_1",
      "tablename": "customer_health_tracker",
      "type": "table"
    },
    {
      "dbname": "customer360",
      "tablename": "customer_operations",
      "type": "table"
    },
    {
      "external": true,
      "dbname": "customer360_from_eu_west_1",
      "tablename": "customer_operations",
      "type": "table"
    },
    {
      "dbname": "customer360",
      "tablename": "org_operations",
      "type": "table"
    },
    {
      "external": true,
      "dbname": "customer360_from_eu_west_1",
      "tablename": "org_operations",
      "type": "table"
    },
    {
      "dbname": "customer360",
      "tablename": "customer_support",
      "type": "table"
    },
    {
      "dbname": "customer360",
      "tablename": "org_platform_usage",
      "type": "table"
    },
    {
      "external": true,
      "dbname": "customer360_from_eu_west_1",
      "tablename": "org_platform_usage",
      "type": "table"
    },
    {
      "dbname": "customer360",
      "tablename": "customer_nps",
      "type": "table"
    },
    {
      "dbname": "customer360",
      "tablename": "org_sophistication",
      "type": "table"
    },
    {
      "external": true,
      "dbname": "customer360_from_eu_west_1",
      "tablename": "org_sophistication",
      "type": "table"
    },
    {
      "dbname": "customer360",
      "tablename": "org_compliance",
      "type": "table"
    },
    {
      "external": true,
      "dbname": "customer360_from_eu_west_1",
      "tablename": "org_compliance",
      "type": "table"
    }
  ],
  "backfill_start_date": "2015-06-19",
  "parameters": ["start_date", "end_date"],
  "output": {
    "dbname": "customer360",
    "tablename": "customer_360",
    "type": "table",
    "partition": ["date"],
    "primary_key": ["date", "org_id"],
    "schema": [
      {
        "name": "org_id",
        "type": "long",
        "metadata": {
          "comment": "This Internal ID for the customer's Samsara org."
        }
      },
      {
        "name": "sam_number",
        "type": "string",
        "metadata": {
          "comment": "This is the internal Samsara Customer ID."
        }
      },
      {
        "name": "first_heartbeat_date",
        "type": "string",
        "metadata": {
          "comment": "This date of the first detected heartbeat for a device in the respective org id."
        }
      },
      {
        "name": "date",
        "type": "date",
        "metadata": {
          "comment": "This is the date the data in the row was recorded."
        }
      },
      {
        "name": "csm_trend",
        "type": "string",
        "metadata": {
          "comment": "This is the trend of customer sentiment."
        }
      },
      {
        "name": "csm_rating",
        "type": "string",
        "metadata": {
          "comment": "This is a measure of customer sentiment given by customer success manager."
        }
      },
      {
        "name": "csm_sentiment_cause",
        "type": "string",
        "metadata": {
          "comment": "This is the reason of the csm rating."
        }
      },
      {
        "name": "csm_notes",
        "type": "string",
        "metadata": {
          "comment": "This is the notes from the customer success manager."
        }
      },
      {
        "name": "num_trips",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is the number of trips done by the org."
        }
      },
      {
        "name": "total_trip_duration",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is the total duration of trips done by the org in ms."
        }
      },
      {
        "name": "total_trip_distance_meters",
        "type": "double",
        "nullable": true,
        "metadata": {
          "comment": "This is the total distance of trips done by the org in meters."
        }
      },
      {
        "name": "total_fuel_consumed_ml",
        "type": "double",
        "nullable": true,
        "metadata": {
          "comment": "This is the total fuel consumed of trips done by the org in ml."
        }
      },
      {
        "name": "total_not_speeding_ms",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is the trip time spent not speeding org in ms."
        }
      },
      {
        "name": "total_light_speeding_ms",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is the trip time spent lightly speeding org in ms."
        }
      },
      {
        "name": "total_moderate_speeding_ms",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is the trip time spent moderately speeding org in ms."
        }
      },
      {
        "name": "total_heavy_speeding_ms",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is the trip time spent heavily speeding org in ms."
        }
      },
      {
        "name": "total_severe_speeding_ms",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is the trip time spent severely speeding org in ms."
        }
      },
      {
        "name": "total_harsh_events",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is the total number of harsh event by the org."
        }
      },
      {
        "name": "total_data_usage",
        "type": "double",
        "nullable": true,
        "metadata": {
          "comment": "This is the amount of cellular data used in bytes for the org."
        }
      },
      {
        "name": "num_active_vg",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of active vg in the org."
        }
      },
      {
        "name": "num_active_cm",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of active cm in the org."
        }
      },
      {
        "name": "num_active_ag",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of active ag in the org."
        }
      },
      {
        "name": "num_active_ig",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of active ig in the org."
        }
      },
      {
        "name": "num_returned_vg",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of returned vg in the org."
        }
      },
      {
        "name": "num_returned_cm",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of returned cm in the org."
        }
      },
      {
        "name": "num_returned_ag",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of returned ag in the org."
        }
      },
      {
        "name": "num_returned_ig",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of returned ig in the org."
        }
      },
      {
        "name": "haBraking",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of harsh braking events."
        }
      },
      {
        "name": "haAccel",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of harsh accel events."
        }
      },
      {
        "name": "haSharpTurn",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of harsh sharp turn events."
        }
      },
      {
        "name": "haCrash",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of harsh crash events."
        }
      },
      {
        "name": "haDistractedDriving",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of harsh distracted driving events."
        }
      },
      {
        "name": "haTailgating",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of harsh tailgating events."
        }
      },
      {
        "name": "needs_review",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of events that need review."
        }
      },
      {
        "name": "needs_coaching",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of events that need coaching."
        }
      },
      {
        "name": "needs_recognition",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of events that need recognition."
        }
      },
      {
        "name": "reviewed",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of events that have been reviewed."
        }
      },
      {
        "name": "coached",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of events that have been coached."
        }
      },
      {
        "name": "recognized",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of events that have been recognized."
        }
      },
      {
        "name": "dismissed",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "This is number of events that have been dismissed."
        }
      },
      {
        "name": "num_videos_retrieved",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "The number of videos retrieved by the customer on the specified date."
        }
      },
      {
        "name": "assets",
        "type": "long",
        "metadata": {
          "comment": "The number of tickets in the Assets product area on that date."
        }
      },
      {
        "name": "backend_infrastructure",
        "type": "long",
        "metadata": {
          "comment": "The number of tickets in the Backend Infrastucture product area on that date."
        }
      },
      {
        "name": "connected_admin",
        "type": "long",
        "metadata": {
          "comment": "The number of tickets in the Connected Admin product area on that date."
        }
      },
      {
        "name": "connected_driver",
        "type": "long",
        "metadata": {
          "comment": "The number of tickets in the Connected Driver product area on that date."
        }
      },
      {
        "name": "dashcam",
        "type": "long",
        "metadata": {
          "comment": "The number of tickets in the Dashcam product area on that date."
        }
      },
      {
        "name": "eurofleet",
        "type": "long",
        "metadata": {
          "comment": "The number of tickets in the Eurofleet product area on that date."
        }
      },
      {
        "name": "fleet_app_ecosystem",
        "type": "long",
        "metadata": {
          "comment": "The number of tickets in the Fleet App Ecosystem product area on that date."
        }
      },
      {
        "name": "fleet_management_-_other",
        "type": "long",
        "metadata": {
          "comment": "The number of tickets in the Fleet Management - Other product area on that date."
        }
      },
      {
        "name": "hardware",
        "type": "long",
        "metadata": {
          "comment": "The number of tickets in the Hardware product area on that date."
        }
      },
      {
        "name": "industrial",
        "type": "long",
        "metadata": {
          "comment": "The number of tickets in the Industrial product area on that date."
        }
      },
      {
        "name": "multicam",
        "type": "long",
        "metadata": {
          "comment": "The number of tickets in the Multicam product area on that date."
        }
      },
      {
        "name": "non-product_related",
        "type": "long",
        "metadata": {
          "comment": "The number of tickets in the Non-Product Related product area on that date."
        }
      },
      {
        "name": "platform",
        "type": "long",
        "metadata": {
          "comment": "The number of tickets in the Platform product area on that date."
        }
      },
      {
        "name": "safety",
        "type": "long",
        "metadata": {
          "comment": "The number of tickets in the Safety product area on that date."
        }
      },
      {
        "name": "telematics",
        "type": "long",
        "metadata": {
          "comment": "The number of tickets in the Telematics product area on that date."
        }
      },
      {
        "name": "unknown",
        "type": "long",
        "metadata": {
          "comment": "The number of tickets in the Unknown product area on that date."
        }
      },
      {
        "name": "num_route_loads",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "The number of cloud dashboard loads the customer had on the specific date."
        }
      },
      {
        "name": "num_users",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "The number of users that logged in per customer had on the specific date."
        }
      },
      {
        "name": "num_driver_app_loads",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "The number of mobile driver app loads the customer had on the specific date."
        }
      },
      {
        "name": "num_admin_app_loads",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "The number of fleet admin app loads the customer had on the specific date."
        }
      },
      {
        "name": "avg_raw_score",
        "type": "double",
        "nullable": true,
        "metadata": {
          "comment": "The average raw NPS Score for the customer on a specific day."
        }
      },
      {
        "name": "avg_nps_score",
        "type": "double",
        "nullable": true,
        "metadata": {
          "comment": "The average NPS Score for the customer on a specific day."
        }
      },
      {
        "name": "num_scheduled_reports",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "The number of scheduled reports the customer had configured on the specific date."
        }
      },
      {
        "name": "num_routes",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "The number of routes the customer had configured on the specific date."
        }
      },
      {
        "name": "num_addresses",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "The number of addresses the customer had configured on the specific date."
        }
      },
      {
        "name": "num_alerts",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "The number of alerts the customer had configured on the specific date."
        }
      },
      {
        "name": "num_roles",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "The number of roles the customer had configured on the specific date."
        }
      },
      {
        "name": "num_tags",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "The number of tags the customer had configured on the specific date."
        }
      },
      {
        "name": "num_cloud_users",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "The number of users the customer had configured on the specific date."
        }
      },
      {
        "name": "num_api_calls",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "The number of api calls the customer had made on the specific date."
        }
      },
      {
        "name": "num_unassigned_segments",
        "type": "long",
        "metadata": {
          "comment": "The number of unassigned segments the customer has on the specific date."
        }
      },
      {
        "name": "unassigned_driver_time_hours",
        "type": "double",
        "metadata": {
          "comment": "The number of hours of unassigned of the segments the customer has on the specific date."
        }
      },
      {
        "name": "total_devices_connected",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "The total number of devices connected over time by the customer has on the specific date."
        }
      },
      {
        "name": "total_devices_shipped",
        "type": "long",
        "nullable": true,
        "metadata": {
          "comment": "The total number of devices shipped over time by the customer has on the specific date."
        }
      }
    ],
    "write_mode": "merge"
  }
}
