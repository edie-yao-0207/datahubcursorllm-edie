{
  "name": "dispatch_routes_report.actual_route_times",
  "owner": "Routing",
  "description": "Calculate the actual start time and end time (in ms) for each route for the dispatch routes reports. To see the original Go logic, see fleet/dispatch/dispatchmodels/dispatch_route.go, for GetActualStartTime() and GetActualEndTime()",
  "dependencies": [
    {
      "dbname": "dispatch_routes_report",
      "tablename": "selected_routes_and_jobs",
      "type": "table"
    }
  ],
  "parameters": ["start_date", "end_date"],
  "output": {
    "dbname": "dispatch_routes_report",
    "tablename": "actual_route_times",
    "type": "table",
    "partition": ["route_scheduled_or_updated_date"],
    "primary_key": [
      "route_scheduled_or_updated_date",
      "org_id",
      "route_id",
      "object_type",
      "object_id",
      "scheduled_start_ms"
    ],
    "schema": [
      {
        "name": "route_id",
        "type": "long"
      },
      {
        "name": "org_id",
        "type": "long"
      },
      {
        "name": "object_type",
        "type": "integer"
      },
      {
        "name": "object_id",
        "type": "long"
      },
      {
        "name": "actual_start_ms",
        "type": "long"
      },
      {
        "name": "actual_end_ms",
        "type": "long"
      },
      {
        "name": "scheduled_start_ms",
        "type": "long"
      },
      {
        "name": "route_scheduled_or_updated_date",
        "type": "date"
      }
    ],
    "write_mode": "merge"
  },
  "nonproduction": true,
  "disabled_regions": ["us-west-2", "eu-west-1", "ca-central-1"]
}
