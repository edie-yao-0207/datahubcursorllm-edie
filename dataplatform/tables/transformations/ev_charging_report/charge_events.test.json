{
  "test_cases": [
    {
      "label": "test one charge event under 5 minutes is ignored",
      "parameters": {
        "start_date": " '2020-01-01' ",
        "end_date": " '2020-01-10' "
      },
      "input_data": {
        "kinesisstats.osdevchargingstatus": [
          {
            "org_id": 1,
            "object_id": 1,
            "value": { "int_value": 1, "is_databreak": false, "is_end": false },
            "time": 0,
            "date": "2020-01-05"
          },
          {
            "org_id": 1,
            "object_id": 1,
            "value": { "int_value": 2, "is_databreak": false, "is_end": false },
            "time": 300000,
            "date": "2020-01-05"
          },
          {
            "org_id": 1,
            "object_id": 1,
            "value": { "int_value": 1, "is_databreak": false, "is_end": false },
            "time": 550000,
            "date": "2020-01-05"
          }
        ]
      },
      "expected_data": []
    },
    {
      "label": "test one charge event over 5 minutes is found",
      "parameters": {
        "start_date": " '2020-01-01' ",
        "end_date": " '2020-01-10' "
      },
      "input_data": {
        "kinesisstats.osdevchargingstatus": [
          {
            "org_id": 1,
            "object_id": 1,
            "value": { "int_value": 1, "is_databreak": false, "is_end": false },
            "time": 0,
            "date": "2020-01-05"
          },
          {
            "org_id": 1,
            "object_id": 1,
            "value": { "int_value": 2, "is_databreak": false, "is_end": false },
            "time": 1800000,
            "date": "2020-01-05"
          },
          {
            "org_id": 1,
            "object_id": 1,
            "value": { "int_value": 1, "is_databreak": false, "is_end": false },
            "time": 3600000,
            "date": "2020-01-05"
          }
        ]
      },
      "expected_data": [
        {
          "date": "2020-01-05",
          "org_id": 1,
          "object_id": 1,
          "start_ms": 1800000,
          "end_ms": 3600000
        }
      ]
    },
    {
      "label": "test multiple nearby charge events from one device that should be stitched into one event",
      "parameters": {
        "start_date": " '2020-01-01' ",
        "end_date": " '2020-01-10' "
      },
      "input_data": {
        "kinesisstats.osdevchargingstatus": [
          {
            "org_id": 1,
            "object_id": 1,
            "value": { "int_value": 1, "is_databreak": false, "is_end": false },
            "time": 0,
            "date": "2020-01-05"
          },
          {
            "org_id": 1,
            "object_id": 1,
            "value": { "int_value": 2, "is_databreak": false, "is_end": false },
            "time": 1800000,
            "date": "2020-01-05"
          },
          {
            "org_id": 1,
            "object_id": 1,
            "value": { "int_value": 1, "is_databreak": false, "is_end": false },
            "time": 3600000,
            "date": "2020-01-05"
          },
          {
            "org_id": 1,
            "object_id": 1,
            "value": { "int_value": 2, "is_databreak": false, "is_end": false },
            "time": 3850000,
            "date": "2020-01-05"
          },
          {
            "org_id": 1,
            "object_id": 1,
            "value": { "int_value": 1, "is_databreak": false, "is_end": false },
            "time": 9000000,
            "date": "2020-01-05"
          }
        ]
      },
      "expected_data": [
        {
          "date": "2020-01-05",
          "org_id": 1,
          "object_id": 1,
          "start_ms": 1800000,
          "end_ms": 9000000
        }
      ]
    }
  ]
}
